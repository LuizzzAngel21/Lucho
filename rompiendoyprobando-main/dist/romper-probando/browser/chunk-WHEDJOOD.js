import{B as c,Tc as m,g as a,h as s,kb as p,n as l,y as u}from"./chunk-26SCTFAY.js";var g=class e{constructor(r){this.http=r}apiUrl=`${m.apiUrl}/api/auth`;login(r,o){return this.http.post(`${this.apiUrl}/login`,{nombreUsuario:r,contrasena:o}).pipe(s(t=>{if(t.success){let i=t.data,n={username:i.nombreUsuario,role:i.rol,id:i.idUsuario};return localStorage.setItem("user",JSON.stringify(n)),n}throw new Error("Error en login")}),l(t=>(console.error("Error de autenticaci\xF3n:",t),a(()=>new Error("Credenciales inv\xE1lidas")))))}register(r){return this.http.post(`${this.apiUrl}/register`,r)}logout(){localStorage.removeItem("user")}isAuthenticated(){return!!localStorage.getItem("user")}getCurrentUser(){let r=localStorage.getItem("user");if(!r)return null;try{return JSON.parse(r)}catch{return null}}static \u0275fac=function(o){return new(o||e)(c(p))};static \u0275prov=u({token:e,factory:e.\u0275fac,providedIn:"root"})};export{g as a};
