import{a as Je}from"./chunk-WHEDJOOD.js";import{a as De,c as ge,d as Y}from"./chunk-IAWJUBHW.js";import"./chunk-VN3CQEPZ.js";import"./chunk-GMITE7GY.js";import{p as Ze}from"./chunk-JXCPYOSY.js";import{$ as h,$b as T,B as ye,Bc as G,Cc as Ge,Dc as M,E as g,Ec as R,F as S,Fc as w,Ha as a,Hc as E,Ic as q,Ja as s,Kc as O,La as le,Lc as y,Ma as me,Na as de,Nc as I,Oc as A,Qc as k,R as r,S as D,Sc as N,Tc as J,Uc as Ke,Xc as Xe,Y as L,Zb as Le,_c as be,a as Ne,aa as _e,ac as Ue,b as Fe,bc as P,bd as K,cc as Ce,cd as he,db as j,dc as W,dd as X,e as Ee,ea as m,f as qe,fc as je,fd as Ye,h as H,hb as v,j as se,jc as ze,kb as Be,ma as f,mb as Ve,na as n,nc as Qe,oa as o,ob as He,pa as b,qa as c,qb as Ie,qc as We,ra as p,t as Oe,ta as x,va as _,w as ue,wa as C,y as $e,z as fe}from"./chunk-26SCTFAY.js";function ot(e,t){e&1&&(n(0,"th",22),a(1," Revisar "),o())}function at(e,t){if(e&1){let i=x();n(0,"td",23)(1,"button",20),_("click",function(){let d=g(i).$implicit,u=C();return S(u.revisarStock.emit(d))}),a(2,"Revisar stock"),o()()}}function rt(e,t){e&1&&(n(0,"th",22),a(1," ID Producto "),o())}function lt(e,t){if(e&1&&(n(0,"td",23),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.id_producto," ")}}function mt(e,t){e&1&&(n(0,"th",22),a(1," Nombre "),o())}function dt(e,t){if(e&1&&(n(0,"td",23),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.nombre_producto," ")}}function ct(e,t){e&1&&(n(0,"th",22),a(1," Descripci\xF3n "),o())}function pt(e,t){if(e&1&&(n(0,"td",23),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.descripcion_producto," ")}}function st(e,t){e&1&&(n(0,"th",22),a(1," Cant. Solicitada "),o())}function ut(e,t){if(e&1&&(n(0,"td",23),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.cantidadsolicitada," ")}}function ft(e,t){e&1&&(n(0,"th",22),a(1," C\xF3digo DIGEMID "),o())}function _t(e,t){if(e&1&&(n(0,"td",23),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.codigo_digemid," ")}}function Ct(e,t){e&1&&(n(0,"th",22),a(1," Registro Sanitario "),o())}function bt(e,t){if(e&1&&(n(0,"td",23),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.registro_sanitario," ")}}function ht(e,t){e&1&&(n(0,"th",22),a(1," Tipo "),o())}function Dt(e,t){if(e&1&&(n(0,"td",23),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.id_tipo," ")}}function gt(e,t){e&1&&(n(0,"th",22),a(1," Forma "),o())}function St(e,t){if(e&1&&(n(0,"td",23),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.id_forma," ")}}function xt(e,t){e&1&&(n(0,"th",22),a(1," Estado "),o())}function vt(e,t){if(e&1&&(n(0,"td",23),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.estado," ")}}function Tt(e,t){e&1&&(n(0,"th",22),a(1," Decision "),o())}function Pt(e,t){if(e&1){let i=x();n(0,"td",23)(1,"mat-form-field",24)(2,"mat-select",25),de("ngModelChange",function(d){let u=g(i).$implicit;return me(u.decision,d)||(u.decision=d),S(d)}),_("selectionChange",function(){g(i);let d=C();return S(d.onDecisionChange())}),n(3,"mat-option",26),a(4,"COMPRAS"),o(),n(5,"mat-option",27),a(6,"DISTRIBUCION"),o()()()()}if(e&2){let i=t.$implicit;r(2),le("ngModel",i.decision)}}function Mt(e,t){e&1&&b(0,"tr",28)}function Rt(e,t){e&1&&b(0,"tr",29)}var Se=class e{data=[];observaciones="";observacionesChange=new D;atender=new D;revisarStock=new D;volver=new D;displayedColumns=["revisar","id_producto","nombre_producto","descripcion_producto","cantidadsolicitada","codigo_digemid","registro_sanitario","id_tipo","id_forma","estado","decision"];onDecisionChange(){}todasDecisionesTomadas(){return this.data.length>0&&this.data.every(t=>!!t.decision)}emitirAtender(){this.todasDecisionesTomadas()&&this.atender.emit({productos:this.data,observaciones:this.observaciones})}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=h({type:e,selectors:[["app-detalle-requerimiento-atender-table"]],inputs:{data:"data",observaciones:"observaciones"},outputs:{observacionesChange:"observacionesChange",atender:"atender",revisarStock:"revisarStock",volver:"volver"},decls:46,vars:5,consts:[[1,"atender-container"],["mat-table","",1,"mat-elevation-z2","atender-table",3,"dataSource"],["matColumnDef","revisar"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id_producto"],["matColumnDef","nombre_producto"],["matColumnDef","descripcion_producto"],["matColumnDef","cantidadsolicitada"],["matColumnDef","codigo_digemid"],["matColumnDef","registro_sanitario"],["matColumnDef","id_tipo"],["matColumnDef","id_forma"],["matColumnDef","estado"],["matColumnDef","decision"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"observaciones"],["matInput","","rows","4","placeholder","Ingrese observaciones",3,"ngModelChange","ngModel"],[1,"acciones"],["mat-stroked-button","","color","primary",3,"click"],["mat-raised-button","","color","primary",3,"click","disabled"],["mat-header-cell",""],["mat-cell",""],["appearance","outline",1,"decision-field"],["placeholder","Seleccione",3,"ngModelChange","selectionChange","ngModel"],["value","COMPRAS"],["value","DISTRIBUCION"],["mat-header-row",""],["mat-row",""]],template:function(i,l){i&1&&(n(0,"div",0)(1,"table",1),c(2,2),m(3,ot,2,0,"th",3)(4,at,3,0,"td",4),p(),c(5,5),m(6,rt,2,0,"th",3)(7,lt,2,1,"td",4),p(),c(8,6),m(9,mt,2,0,"th",3)(10,dt,2,1,"td",4),p(),c(11,7),m(12,ct,2,0,"th",3)(13,pt,2,1,"td",4),p(),c(14,8),m(15,st,2,0,"th",3)(16,ut,2,1,"td",4),p(),c(17,9),m(18,ft,2,0,"th",3)(19,_t,2,1,"td",4),p(),c(20,10),m(21,Ct,2,0,"th",3)(22,bt,2,1,"td",4),p(),c(23,11),m(24,ht,2,0,"th",3)(25,Dt,2,1,"td",4),p(),c(26,12),m(27,gt,2,0,"th",3)(28,St,2,1,"td",4),p(),c(29,13),m(30,xt,2,0,"th",3)(31,vt,2,1,"td",4),p(),c(32,14),m(33,Tt,2,0,"th",3)(34,Pt,7,1,"td",4),p(),m(35,Mt,1,0,"tr",15)(36,Rt,1,0,"tr",16),o(),n(37,"div",17)(38,"h3"),a(39,"Observaciones"),o(),n(40,"textarea",18),de("ngModelChange",function(u){return me(l.observaciones,u)||(l.observaciones=u),u}),_("ngModelChange",function(){return l.observacionesChange.emit(l.observaciones)}),o()(),n(41,"div",19)(42,"button",20),_("click",function(){return l.volver.emit()}),a(43,"Volver"),o(),n(44,"button",21),_("click",function(){return l.emitirAtender()}),a(45,"Atender Requerimiento"),o()()()),i&2&&(r(),f("dataSource",l.data),r(34),f("matHeaderRowDef",l.displayedColumns),r(),f("matRowDefColumns",l.displayedColumns),r(4),le("ngModel",l.observaciones),r(4),f("disabled",!l.todasDecisionesTomadas()))},dependencies:[v,G,ze,Qe,We,N,M,w,y,E,R,I,q,O,A,k,P,T,Y,be,ge,De,K,X,he],styles:[".atender-container[_ngcontent-%COMP%]{padding:1rem}.atender-table[_ngcontent-%COMP%]{width:100%;margin-bottom:1.5rem}.decision-field[_ngcontent-%COMP%]{width:160px}.observaciones[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;resize:vertical}.acciones[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:1rem}"]})};function Et(e,t){e&1&&(n(0,"th",17),a(1," N\xFAmero Lote "),o())}function qt(e,t){if(e&1&&(n(0,"td",18),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.numero_lote," ")}}function Ot(e,t){e&1&&(n(0,"th",17),a(1," F. Fabricaci\xF3n "),o())}function yt(e,t){if(e&1&&(n(0,"td",18),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.fecha_fabricacion," ")}}function It(e,t){e&1&&(n(0,"th",17),a(1," F. Vencimiento "),o())}function At(e,t){if(e&1&&(n(0,"td",18),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.fecha_vencimiento," ")}}function kt(e,t){e&1&&(n(0,"th",17),a(1," Cantidad Actual "),o())}function Nt(e,t){if(e&1&&(n(0,"td",18),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.cantidad_actual," ")}}function Ft(e,t){e&1&&(n(0,"th",17),a(1," Ubicaci\xF3n "),o())}function $t(e,t){if(e&1&&(n(0,"td",18),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.ubicacion_almacen," ")}}function Bt(e,t){e&1&&(n(0,"th",17),a(1," Temp. Almac. "),o())}function Vt(e,t){if(e&1&&(n(0,"td",18),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.temperatura_almacenamiento," ")}}function Ht(e,t){e&1&&(n(0,"th",17),a(1," Fecha Registro "),o())}function Lt(e,t){if(e&1&&(n(0,"td",18),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.fecha_creacion," ")}}function Ut(e,t){e&1&&(n(0,"th",17),a(1," Acci\xF3n "),o())}function jt(e,t){if(e&1){let i=x();n(0,"td",18)(1,"button",19),_("click",function(){let d=g(i).$implicit,u=C();return S(u.seleccionar(d))}),n(2,"mat-icon"),a(3,"check"),o()()()}}function zt(e,t){e&1&&b(0,"tr",20)}function Qt(e,t){e&1&&b(0,"tr",21)}var xe=class e{nombreProducto="";lotes=[];close=new D;selectLote=new D;displayedColumns=["numero_lote","fecha_fabricacion","fecha_vencimiento","cantidad_actual","ubicacion_almacen","temperatura_almacenamiento","fecha_creacion","acciones"];seleccionar(t){t.id_lote?(this.selectLote.emit(t.id_lote),this.close.emit()):alert("Error: Este lote no tiene ID v\xE1lido.")}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=h({type:e,selectors:[["app-popup-revisar-stock-producto"]],inputs:{nombreProducto:"nombreProducto",lotes:"lotes"},outputs:{close:"close",selectLote:"selectLote"},decls:34,vars:4,consts:[[1,"popup-overlay"],[1,"popup-container","mat-elevation-z4"],["mat-table","",1,"stock-table",3,"dataSource"],["matColumnDef","numero_lote"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","fecha_fabricacion"],["matColumnDef","fecha_vencimiento"],["matColumnDef","cantidad_actual"],["matColumnDef","ubicacion_almacen"],["matColumnDef","temperatura_almacenamiento"],["matColumnDef","fecha_creacion"],["matColumnDef","acciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"acciones"],["mat-stroked-button","","color","primary",3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-mini-fab","","color","accent",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(i,l){i&1&&(n(0,"div",0)(1,"div",1)(2,"h3"),a(3),o(),n(4,"table",2),c(5,3),m(6,Et,2,0,"th",4)(7,qt,2,1,"td",5),p(),c(8,6),m(9,Ot,2,0,"th",4)(10,yt,2,1,"td",5),p(),c(11,7),m(12,It,2,0,"th",4)(13,At,2,1,"td",5),p(),c(14,8),m(15,kt,2,0,"th",4)(16,Nt,2,1,"td",5),p(),c(17,9),m(18,Ft,2,0,"th",4)(19,$t,2,1,"td",5),p(),c(20,10),m(21,Bt,2,0,"th",4)(22,Vt,2,1,"td",5),p(),c(23,11),m(24,Ht,2,0,"th",4)(25,Lt,2,1,"td",5),p(),c(26,12),m(27,Ut,2,0,"th",4)(28,jt,4,0,"td",5),p(),m(29,zt,1,0,"tr",13)(30,Qt,1,0,"tr",14),o(),n(31,"div",15)(32,"button",16),_("click",function(){return l.close.emit()}),a(33,"Volver"),o()()()()),i&2&&(r(3),s("Stock del producto ",l.nombreProducto," en los almacenes"),r(),f("dataSource",l.lotes),r(25),f("matHeaderRowDef",l.displayedColumns),r(),f("matRowDefColumns",l.displayedColumns))},dependencies:[v,N,M,w,y,E,R,I,q,O,A,k,P,T,Ue,W,Ce],styles:[".popup-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0006;display:flex;justify-content:center;align-items:flex-start;padding-top:3rem;z-index:1000}.popup-container[_ngcontent-%COMP%]{background:#fff;padding:1.25rem 1.5rem;border-radius:8px;width:100%;max-width:900px}h3[_ngcontent-%COMP%]{margin-top:0;margin-bottom:1rem;color:#1e3a8a}.stock-table[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem}th[_ngcontent-%COMP%]{font-weight:600}.acciones[_ngcontent-%COMP%]{text-align:right}"]})};var z=class e{constructor(t,i){this.http=t;this.authService=i}apiUrl=`${J.apiUrl}/api/programacion`;requerimientosSubject=new Ee([]);requerimientos$=this.requerimientosSubject.asObservable();productosAtenderSubject=new Ee([]);loadProductosParaAtender(t){this.http.get(`${this.apiUrl}/requerimientos/${t}/detalles`).subscribe(i=>{let d=i.data.map(u=>({id_producto:u.idProducto.id,nombre_producto:u.idProducto.nombreProducto,descripcion_producto:u.idProducto.nombreProducto,cantidadsolicitada:u.cantidad,codigo_digemid:u.idProducto.codigoDigemid||"",registro_sanitario:u.idProducto.registroSanitario||"",id_tipo:u.idProducto.idTipoNombreTipo||"",id_forma:u.idProducto.idFormaNombreForma||"",estado:"pendiente",idDetalleRequerimiento:u.id}));this.productosAtenderSubject.next(d)})}getProductosParaAtender(){return this.productosAtenderSubject.asObservable()}getLotesByProducto(t){return this.http.get(`${this.apiUrl}/productos/${t}/stock`).pipe(H(i=>i.data.map(l=>({numero_lote:l.idLote.numeroLote,fecha_fabricacion:"",fecha_vencimiento:l.idLote.fechaVencimiento,cantidad_actual:l.stockActual,ubicacion_almacen:l.idAlmacen.nombreAlmacen,temperatura_almacenamiento:"",fecha_creacion:"",id_lote:l.idLote.id}))))}getRequerimientos(){return this.requerimientosSubject.value}getRequerimientoById(t){return this.getRequerimientos().find(i=>i.id_req===t)}getRequerimientosPendientes(){return this.http.get(`${this.apiUrl}/requerimientos/pendientes`).pipe(H(t=>t.data.map(i=>({id_req:i.id.toString(),id_usr:i.idUsuarioSolicitanteNombreUsuario||"N/A",id_dep:i.idDepartamentoNombreDepartamento,fecha:i.fechaSolicitud,descripcion:i.prioridad,prioridad:i.prioridad,status_req:"pendiente",productos:[]}))),ue(t=>this.requerimientosSubject.next(t)))}getRequerimientosPendientesTabla(){return this.getRequerimientosPendientes().pipe(H(this.mapRequerimientosToRows))}getRequerimientosAtendidos(){return this.http.get(`${this.apiUrl}/requerimientos/atendidos`).pipe(H(t=>t.data.map(i=>({id_req:i.id.toString(),id_usr:i.idUsuarioSolicitanteNombreUsuario||"N/A",id_dep:i.idDepartamentoNombreDepartamento,fecha:i.fechaSolicitud,descripcion:i.prioridad,prioridad:i.prioridad,status_req:"atendido",productos:[]}))))}getRequerimientosAtendidosTabla(){return this.getRequerimientosAtendidos().pipe(H(this.mapRequerimientosToRows))}mapRequerimientosToRows(t){return t.map(i=>({id_req:i.id_req,id_usr:i.id_usr,id_dep:i.id_dep,fecha_emision:i.fecha,descripcion:i.descripcion,prioridad:i.prioridad,estado:i.status_req}))}aceptarRequerimiento(t,i){let d=this.authService.getCurrentUser()?.id||1,u=i.filter($=>$.decision==="COMPRAS"),B=i.filter($=>$.decision==="DISTRIBUCION"),pe=[];if(u.length>0){let $={idRequerimiento:Number(t),idUsuarioSolicitante:d,motivo:"Abastecimiento por requerimiento "+t,detalles:u.map(ae=>({idProducto:Number(ae.id_producto),idDetalleRequerimiento:ae.idDetalleRequerimiento,cantidadSolicitada:ae.cantidadsolicitada}))},we={idRequerimiento:Number(t),tipo:"COMPRA",solicitudCompra:$,detallesDistribucion:null};pe.push(this.http.post(`${this.apiUrl}/ordenes`,we))}if(B.length>0){let $=B.filter(re=>!!re.loteSeleccionado);if($.length!==B.length){alert("Error: Productos para distribuci\xF3n deben tener un lote seleccionado.");return}let we=$.map(re=>({idProducto:Number(re.id_producto),idLote:re.loteSeleccionado,cantidad:re.cantidadsolicitada})),ae={idRequerimiento:Number(t),tipo:"DISTRIBUCION",solicitudCompra:null,detallesDistribucion:we};pe.push(this.http.post(`${this.apiUrl}/ordenes`,ae))}pe.length>0&&se(pe).subscribe({next:$=>{console.log("Ordenes creadas:",$),alert("Requerimiento procesado exitosamente.")},error:$=>{console.error("Error procesando requerimiento:",$),alert("Error al procesar: "+($.error?.message||$.message))}})}ordenesDistribucionCache=[];solicitudesCompraCache=[];getOrdenDistribucion(){return this.http.get(`${J.apiUrl}/api/distribucion/ordenes?estado=PENDIENTE`).pipe(Oe(t=>{let i=t.data;if(!i||i.length===0)return qe([]);let l=i.map(d=>this.http.get(`${J.apiUrl}/api/distribucion/ordenes/${d.id}/detalles`).pipe(H(u=>u.data.map(B=>({id_orden_dist:d.id.toString(),id_lote:B.idLote?.id?.toString()||"N/A",id_producto:B.idProducto?.id?.toString()||"N/A",cantidad:B.cantidad,condiciones_transporte:B.estadoEntrega,temperatura_requerida:"",observaciones:"",fecha_creacion:d.fechaDistribucion})))));return se(l).pipe(H(d=>d.flat()))}),ue(t=>this.ordenesDistribucionCache=t))}getSolicitudCompra(){return this.http.get(`${J.apiUrl}/api/compras/solicitudes?estado=PENDIENTE`).pipe(Oe(t=>{let i=t.data;if(!i||i.length===0)return qe([]);let l=i.map(d=>this.http.get(`${J.apiUrl}/api/compras/solicitudes/${d.id}/detalles`).pipe(H(u=>u.data.map(B=>({id_solicitud:d.id.toString(),id_producto:B.idProducto?.id?.toString()||"N/A",cantidad:B.cantidadSolicitada,observacion:B.estado,fecha_creacion:d.fechaSolicitud,fecha_actual:d.fechaSolicitud})))));return se(l).pipe(H(d=>d.flat()))}),ue(t=>this.solicitudesCompraCache=t))}getOrdenDistribucionById(t){return this.ordenesDistribucionCache.filter(i=>i.id_orden_dist===t)}getSolicitudCompraById(t){return this.solicitudesCompraCache.filter(i=>i.id_solicitud===t)}static \u0275fac=function(i){return new(i||e)(ye(Be),ye(Je))};static \u0275prov=$e({token:e,factory:e.\u0275fac,providedIn:"root"})};function Gt(e,t){if(e&1){let i=x();n(0,"app-popup-revisar-stock-producto",3),_("selectLote",function(d){g(i);let u=C();return S(u.onLoteSeleccionado(d))})("close",function(){g(i);let d=C();return S(d.cerrarPopupStock())}),o()}if(e&2){let i=C();f("nombreProducto",i.nombreProductoSeleccionado)("lotes",i.lotesProducto)}}var ve=class e{constructor(t,i){this.programacionService=t;this.route=i}reqIdActual=null;productos=[];observaciones="";mostrarPopupStock=!1;lotesProducto=[];nombreProductoSeleccionado="";productoEnRevision=null;ngOnInit(){let t=this.route.snapshot.paramMap.get("id");t?(this.reqIdActual=t,this.programacionService.loadProductosParaAtender(t)):this.programacionService.getRequerimientosPendientesTabla().subscribe(i=>{i.length&&(this.reqIdActual=i[0].id_req,this.programacionService.loadProductosParaAtender(this.reqIdActual))}),this.programacionService.getProductosParaAtender().subscribe(i=>{this.productos=i.map(l=>{let d=this.productos.find(u=>u.id_producto===l.id_producto);return Fe(Ne({},l),{decision:d?.decision,loteSeleccionado:d?.loteSeleccionado})})})}onAtender(t){this.reqIdActual&&this.programacionService.aceptarRequerimiento(this.reqIdActual,t.productos)}onVolver(){history.back()}onRevisarStock(t){this.productoEnRevision=t,this.nombreProductoSeleccionado=t.nombre_producto,this.programacionService.getLotesByProducto(t.id_producto).subscribe(i=>{this.lotesProducto=i,this.mostrarPopupStock=!0})}onLoteSeleccionado(t){this.productoEnRevision&&(this.productoEnRevision.loteSeleccionado=t,alert(`Lote ${t} seleccionado para ${this.productoEnRevision.nombre_producto}`))}cerrarPopupStock(){this.mostrarPopupStock=!1,this.lotesProducto=[],this.nombreProductoSeleccionado="",this.productoEnRevision=null}static \u0275fac=function(i){return new(i||e)(L(z),L(Ve))};static \u0275cmp=h({type:e,selectors:[["app-disponibilidad-producto"]],decls:5,vars:4,consts:[[1,"page-container"],[3,"observacionesChange","atender","volver","revisarStock","data","observaciones"],[3,"nombreProducto","lotes","selectLote","close",4,"ngIf"],[3,"selectLote","close","nombreProducto","lotes"]],template:function(i,l){i&1&&(n(0,"div",0)(1,"h2"),a(2),o(),n(3,"app-detalle-requerimiento-atender-table",1),de("observacionesChange",function(u){return me(l.observaciones,u)||(l.observaciones=u),u}),_("atender",function(u){return l.onAtender(u)})("volver",function(){return l.onVolver()})("revisarStock",function(u){return l.onRevisarStock(u)}),o(),m(4,Gt,1,2,"app-popup-revisar-stock-producto",2),o()),i&2&&(r(2),s("Atender Requerimiento ",l.reqIdActual),r(),f("data",l.productos),le("observaciones",l.observaciones),r(),f("ngIf",l.mostrarPopupStock))},dependencies:[v,j,Se,xe],styles:[".buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:2rem}.page-container[_ngcontent-%COMP%]{padding:1.5rem;color:#1e3a8a}.card-section[_ngcontent-%COMP%]{margin-bottom:2rem;background-color:#f8f9fc}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{color:#1e3a8a;margin-bottom:1rem}"]})};function Jt(e,t){e&1&&(n(0,"th",13),a(1," ID Req "),o())}function Kt(e,t){if(e&1&&(n(0,"td",14),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.id_req," ")}}function Xt(e,t){e&1&&(n(0,"th",13),a(1," Usuario "),o())}function Yt(e,t){if(e&1&&(n(0,"td",14),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.id_usr," ")}}function Zt(e,t){e&1&&(n(0,"th",13),a(1," Departamento "),o())}function ei(e,t){if(e&1&&(n(0,"td",14),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.id_dep," ")}}function ti(e,t){e&1&&(n(0,"th",13),a(1," Fecha "),o())}function ii(e,t){if(e&1&&(n(0,"td",14),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.fecha," ")}}function ni(e,t){e&1&&(n(0,"th",13),a(1," Prioridad "),o())}function oi(e,t){if(e&1&&(n(0,"td",14),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.prioridad," ")}}function ai(e,t){e&1&&(n(0,"th",13),a(1," Estado "),o())}function ri(e,t){if(e&1&&(n(0,"td",14),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.status_req," ")}}function li(e,t){e&1&&(n(0,"th",13),a(1," Acci\xF3n "),o())}function mi(e,t){if(e&1){let i=x();n(0,"td",14)(1,"button",15),_("click",function(){let d=g(i).$implicit,u=C();return S(u.atender(d))}),a(2,"Atender"),o()()}}function di(e,t){e&1&&b(0,"tr",16)}function ci(e,t){e&1&&b(0,"tr",17)}var Z=class e{constructor(t){this.router=t}data=[];displayedColumns=["id_req","id_usr","id_dep","fecha","prioridad","status_req","accion"];atender(t){this.router.navigate(["/GestionProgramacion/disponibilidad-producto/",t.id_req])}static \u0275fac=function(i){return new(i||e)(L(He))};static \u0275cmp=h({type:e,selectors:[["app-requerimientos-pendientes-table"]],inputs:{data:"data"},standalone:!1,decls:25,vars:3,consts:[[1,"table-container"],["mat-table","",1,"mat-elevation-z2",3,"dataSource"],["matColumnDef","id_req"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id_usr"],["matColumnDef","id_dep"],["matColumnDef","fecha"],["matColumnDef","prioridad"],["matColumnDef","status_req"],["matColumnDef","accion"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-button","","color","primary",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(i,l){i&1&&(n(0,"div",0)(1,"table",1),c(2,2),m(3,Jt,2,0,"th",3)(4,Kt,2,1,"td",4),p(),c(5,5),m(6,Xt,2,0,"th",3)(7,Yt,2,1,"td",4),p(),c(8,6),m(9,Zt,2,0,"th",3)(10,ei,2,1,"td",4),p(),c(11,7),m(12,ti,2,0,"th",3)(13,ii,2,1,"td",4),p(),c(14,8),m(15,ni,2,0,"th",3)(16,oi,2,1,"td",4),p(),c(17,9),m(18,ai,2,0,"th",3)(19,ri,2,1,"td",4),p(),c(20,10),m(21,li,2,0,"th",3)(22,mi,3,0,"td",4),p(),m(23,di,1,0,"tr",11)(24,ci,1,0,"tr",12),o()()),i&2&&(r(),f("dataSource",l.data),r(22),f("matHeaderRowDef",l.displayedColumns),r(),f("matRowDefColumns",l.displayedColumns))},dependencies:[M,w,y,E,R,I,q,O,A,k,T],styles:[".table-container[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto}table[_ngcontent-%COMP%]{width:100%}th[_ngcontent-%COMP%]{background-color:#e0f0ff;color:#1e3a8a;font-weight:700}button[_ngcontent-%COMP%]{color:#1e3a8a;font-weight:500}"]})};function pi(e,t){if(e&1){let i=x();n(0,"button",4),_("click",function(){g(i);let d=C();return S(d.clear())}),a(1,"Limpiar"),o()}}var Te=class e{filterChange=new D;term="";onInput(t){this.term=t,this.filterChange.emit(this.term.trim())}clear(){this.term="",this.filterChange.emit("")}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=h({type:e,selectors:[["app-search-bar-no-atendidos"]],outputs:{filterChange:"filterChange"},standalone:!1,decls:5,vars:2,consts:[[1,"search-wrapper"],["for","filterId",1,"search-label"],["id","filterId","type","text","placeholder","Ej: REQ01",3,"input","value"],["mat-stroked-button","","color","primary",3,"click",4,"ngIf"],["mat-stroked-button","","color","primary",3,"click"]],template:function(i,l){i&1&&(n(0,"div",0)(1,"label",1),a(2,"Filtrar por ID Requerimiento:"),o(),n(3,"input",2),_("input",function(u){return l.onInput(u.target.value)}),o(),m(4,pi,2,0,"button",3),o()),i&2&&(r(3),f("value",l.term),r(),f("ngIf",l.term))},dependencies:[j,T],styles:[".search-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;margin-bottom:1rem}.search-label[_ngcontent-%COMP%]{font-weight:600;color:#1e3a8a}input[type=text][_ngcontent-%COMP%]{padding:6px 10px;border:1px solid #c5d4f1;border-radius:4px;font-size:14px;width:180px}input[type=text][_ngcontent-%COMP%]:focus{outline:none;border-color:#1e3a8a;box-shadow:0 0 0 2px #1e3a8a26}"]})};var ce=class e{constructor(t){this.programacionService=t}dataOriginal=[];data=[];filterTerm="";ngOnInit(){this.programacionService.getRequerimientosPendientes().subscribe(t=>{this.dataOriginal=t,this.applyFilter()})}onFilterChange(t){this.filterTerm=t,this.applyFilter()}applyFilter(){let t=this.filterTerm.toLowerCase();this.data=t?this.dataOriginal.filter(i=>i.id_req.toString().includes(t)):this.dataOriginal}static \u0275fac=function(i){return new(i||e)(L(z))};static \u0275cmp=h({type:e,selectors:[["app-lista-requerimientos-noatendidos"]],standalone:!1,decls:5,vars:1,consts:[[1,"page-container"],[3,"filterChange"],[3,"data"]],template:function(i,l){i&1&&(n(0,"div",0)(1,"h2"),a(2,"Requerimientos Pendientes"),o(),n(3,"app-search-bar-no-atendidos",1),_("filterChange",function(u){return l.onFilterChange(u)}),o(),b(4,"app-requerimientos-pendientes-table",2),o()),i&2&&(r(4),f("data",l.data))},dependencies:[Z,Te],styles:[".page-container[_ngcontent-%COMP%]{padding:1.5rem;color:#1e3a8a}.card-section[_ngcontent-%COMP%]{margin-bottom:2rem;background-color:#f8f9fc}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{color:#1e3a8a;margin-bottom:1rem}"]})};function ui(e,t){if(e&1){let i=x();n(0,"button",9),_("click",function(){g(i);let d=C();return S(d.clear())}),n(1,"mat-icon"),a(2,"close"),o()()}}var ee=class e{filterChange=new D;term="";modo="REQUERIMIENTOS";onTerm(t){this.term=t,this.emit()}onModo(t){this.modo=t,this.emit()}clear(){this.term="",this.emit()}emit(){this.filterChange.emit({term:this.term.trim(),modo:this.modo})}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=h({type:e,selectors:[["app-search-bar-atendidos"]],outputs:{filterChange:"filterChange"},decls:16,vars:3,consts:[[1,"search-bar"],["appearance","outline",1,"term-field"],["matInput","","placeholder","OD001 / SC001",3,"input","value"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["appearance","outline",1,"mode-field"],[3,"selectionChange","value"],["value","REQUERIMIENTOS"],["value","DISTRIBUCION"],["value","COMPRAS"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(i,l){i&1&&(n(0,"div",0)(1,"mat-form-field",1)(2,"mat-label"),a(3,"Buscar ID"),o(),n(4,"input",2),_("input",function(u){return l.onTerm(u.target.value)}),o(),m(5,ui,3,0,"button",3),o(),n(6,"mat-form-field",4)(7,"mat-label"),a(8,"Tipo"),o(),n(9,"mat-select",5),_("selectionChange",function(u){return l.onModo(u.value)}),n(10,"mat-option",6),a(11,"REQUERIMIENTOS"),o(),n(12,"mat-option",7),a(13,"DISTRIBUCION"),o(),n(14,"mat-option",8),a(15,"COMPRAS"),o()()()()),i&2&&(r(4),f("value",l.term),r(),f("ngIf",l.term),r(4),f("value",l.modo))},dependencies:[v,j,G,K,be,Ke,Xe,X,he,Y,ge,De,W,Ce,P,Le],styles:[".search-bar[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-wrap:wrap;align-items:center;margin-bottom:1rem}.term-field[_ngcontent-%COMP%], .mode-field[_ngcontent-%COMP%]{width:220px}"]})};function _i(e,t){e&1&&(n(0,"th",15),a(1," ID Orden "),o())}function Ci(e,t){if(e&1&&(n(0,"td",16),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.id_orden_dist," ")}}function bi(e,t){e&1&&(n(0,"th",15),a(1," ID Lote "),o())}function hi(e,t){if(e&1&&(n(0,"td",16),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.id_lote," ")}}function Di(e,t){e&1&&(n(0,"th",15),a(1," ID Producto "),o())}function gi(e,t){if(e&1&&(n(0,"td",16),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.id_producto," ")}}function Si(e,t){e&1&&(n(0,"th",15),a(1," Cantidad "),o())}function xi(e,t){if(e&1&&(n(0,"td",16),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.cantidad," ")}}function vi(e,t){e&1&&(n(0,"th",15),a(1," Condiciones Transporte "),o())}function Ti(e,t){if(e&1&&(n(0,"td",16),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.condiciones_transporte||"-"," ")}}function Pi(e,t){e&1&&(n(0,"th",15),a(1," Temp. Req. "),o())}function Mi(e,t){if(e&1&&(n(0,"td",16),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.temperatura_requerida||"-"," ")}}function Ri(e,t){e&1&&(n(0,"th",15),a(1," Observaciones "),o())}function wi(e,t){if(e&1&&(n(0,"td",16),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.observaciones||"-"," ")}}function Ei(e,t){e&1&&(n(0,"th",15),a(1," Fecha Creaci\xF3n "),o())}function qi(e,t){if(e&1&&(n(0,"td",16),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.fecha_creacion||"-"," ")}}function Oi(e,t){e&1&&(n(0,"th",15),a(1," Acciones "),o())}function yi(e,t){if(e&1){let i=x();n(0,"td",16)(1,"button",17),_("click",function(){let d=g(i).$implicit,u=C();return S(u.onVerDetalle(d))}),a(2,"Ver detalle"),o()()}}function Ii(e,t){e&1&&b(0,"tr",18)}function Ai(e,t){e&1&&b(0,"tr",19)}var te=class e{data=[];verDetalle=new D;displayedColumns=["id_orden_dist","id_lote","id_producto","cantidad","condiciones_transporte","temperatura_requerida","observaciones","fecha_creacion","acciones"];onVerDetalle(t){this.verDetalle.emit(t.id_orden_dist)}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=h({type:e,selectors:[["app-orden-distribucion-table"]],inputs:{data:"data"},outputs:{verDetalle:"verDetalle"},decls:31,vars:3,consts:[[1,"table-container"],["mat-table","",1,"mat-elevation-z2",3,"dataSource"],["matColumnDef","id_orden_dist"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id_lote"],["matColumnDef","id_producto"],["matColumnDef","cantidad"],["matColumnDef","condiciones_transporte"],["matColumnDef","temperatura_requerida"],["matColumnDef","observaciones"],["matColumnDef","fecha_creacion"],["matColumnDef","acciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-button","","color","primary",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(i,l){i&1&&(n(0,"div",0)(1,"table",1),c(2,2),m(3,_i,2,0,"th",3)(4,Ci,2,1,"td",4),p(),c(5,5),m(6,bi,2,0,"th",3)(7,hi,2,1,"td",4),p(),c(8,6),m(9,Di,2,0,"th",3)(10,gi,2,1,"td",4),p(),c(11,7),m(12,Si,2,0,"th",3)(13,xi,2,1,"td",4),p(),c(14,8),m(15,vi,2,0,"th",3)(16,Ti,2,1,"td",4),p(),c(17,9),m(18,Pi,2,0,"th",3)(19,Mi,2,1,"td",4),p(),c(20,10),m(21,Ri,2,0,"th",3)(22,wi,2,1,"td",4),p(),c(23,11),m(24,Ei,2,0,"th",3)(25,qi,2,1,"td",4),p(),c(26,12),m(27,Oi,2,0,"th",3)(28,yi,3,0,"td",4),p(),m(29,Ii,1,0,"tr",13)(30,Ai,1,0,"tr",14),o()()),i&2&&(r(),f("dataSource",l.data),r(28),f("matHeaderRowDef",l.displayedColumns),r(),f("matRowDefColumns",l.displayedColumns))},dependencies:[v,N,M,w,y,E,R,I,q,O,A,k,P,T],styles:[".table-container[_ngcontent-%COMP%]{max-height:320px;overflow-y:auto;margin-bottom:1rem}table[_ngcontent-%COMP%]{width:100%}th[_ngcontent-%COMP%]{background:#e5edff;color:#1b3e83;font-weight:600}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{font-size:13px}button[_ngcontent-%COMP%]{font-size:12px}"]})};function Ni(e,t){e&1&&(n(0,"th",13),a(1," ID Solicitud "),o())}function Fi(e,t){if(e&1&&(n(0,"td",14),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.id_solicitud," ")}}function $i(e,t){e&1&&(n(0,"th",13),a(1," ID Producto "),o())}function Bi(e,t){if(e&1&&(n(0,"td",14),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.id_producto," ")}}function Vi(e,t){e&1&&(n(0,"th",13),a(1," Cantidad "),o())}function Hi(e,t){if(e&1&&(n(0,"td",14),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.cantidad," ")}}function Li(e,t){e&1&&(n(0,"th",13),a(1," Observaci\xF3n "),o())}function Ui(e,t){if(e&1&&(n(0,"td",14),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.observacion||"-"," ")}}function ji(e,t){e&1&&(n(0,"th",13),a(1," Fecha Creaci\xF3n "),o())}function zi(e,t){if(e&1&&(n(0,"td",14),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.fecha_creacion||"-"," ")}}function Qi(e,t){e&1&&(n(0,"th",13),a(1," Fecha Actualizaci\xF3n "),o())}function Wi(e,t){if(e&1&&(n(0,"td",14),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.fecha_actual||"-"," ")}}function Gi(e,t){e&1&&(n(0,"th",13),a(1," Acciones "),o())}function Ji(e,t){if(e&1){let i=x();n(0,"td",14)(1,"button",15),_("click",function(){let d=g(i).$implicit,u=C();return S(u.onVerDetalle(d))}),a(2,"Ver detalle"),o()()}}function Ki(e,t){e&1&&b(0,"tr",16)}function Xi(e,t){e&1&&b(0,"tr",17)}var ie=class e{data=[];verDetalle=new D;displayedColumns=["id_solicitud","id_producto","cantidad","observacion","fecha_creacion","fecha_actual","acciones"];onVerDetalle(t){this.verDetalle.emit(t.id_solicitud)}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=h({type:e,selectors:[["app-solicitud-compras-table"]],inputs:{data:"data"},outputs:{verDetalle:"verDetalle"},decls:25,vars:3,consts:[[1,"table-container"],["mat-table","",1,"mat-elevation-z2",3,"dataSource"],["matColumnDef","id_solicitud"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id_producto"],["matColumnDef","cantidad"],["matColumnDef","observacion"],["matColumnDef","fecha_creacion"],["matColumnDef","fecha_actual"],["matColumnDef","acciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-button","","color","primary",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(i,l){i&1&&(n(0,"div",0)(1,"table",1),c(2,2),m(3,Ni,2,0,"th",3)(4,Fi,2,1,"td",4),p(),c(5,5),m(6,$i,2,0,"th",3)(7,Bi,2,1,"td",4),p(),c(8,6),m(9,Vi,2,0,"th",3)(10,Hi,2,1,"td",4),p(),c(11,7),m(12,Li,2,0,"th",3)(13,Ui,2,1,"td",4),p(),c(14,8),m(15,ji,2,0,"th",3)(16,zi,2,1,"td",4),p(),c(17,9),m(18,Qi,2,0,"th",3)(19,Wi,2,1,"td",4),p(),c(20,10),m(21,Gi,2,0,"th",3)(22,Ji,3,0,"td",4),p(),m(23,Ki,1,0,"tr",11)(24,Xi,1,0,"tr",12),o()()),i&2&&(r(),f("dataSource",l.data),r(22),f("matHeaderRowDef",l.displayedColumns),r(),f("matRowDefColumns",l.displayedColumns))},dependencies:[v,N,M,w,y,E,R,I,q,O,A,k,P,T],styles:[".table-container[_ngcontent-%COMP%]{max-height:320px;overflow-y:auto;margin-bottom:1rem}table[_ngcontent-%COMP%]{width:100%}th[_ngcontent-%COMP%]{background:#e5edff;color:#1b3e83;font-weight:600}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{font-size:13px}button[_ngcontent-%COMP%]{font-size:12px}"]})};function Zi(e,t){e&1&&(n(0,"th",16),a(1," ID Solicitud "),o())}function en(e,t){if(e&1&&(n(0,"td",17),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.id_solicitud," ")}}function tn(e,t){e&1&&(n(0,"th",16),a(1," ID Producto "),o())}function nn(e,t){if(e&1&&(n(0,"td",17),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.id_producto," ")}}function on(e,t){e&1&&(n(0,"th",16),a(1," Cantidad "),o())}function an(e,t){if(e&1&&(n(0,"td",17),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.cantidad," ")}}function rn(e,t){e&1&&(n(0,"th",16),a(1," Observaci\xF3n "),o())}function ln(e,t){if(e&1&&(n(0,"td",17),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.observacion||"-"," ")}}function mn(e,t){e&1&&(n(0,"th",16),a(1," Fecha Creaci\xF3n "),o())}function dn(e,t){if(e&1&&(n(0,"td",17),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.fecha_creacion||"-"," ")}}function cn(e,t){e&1&&(n(0,"th",16),a(1," Fecha Actualizaci\xF3n "),o())}function pn(e,t){if(e&1&&(n(0,"td",17),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.fecha_actual||"-"," ")}}function sn(e,t){e&1&&b(0,"tr",18)}function un(e,t){e&1&&b(0,"tr",19)}var ne=class e{data=[];close=new D;atender=new D;displayedColumns=["id_solicitud","id_producto","cantidad","observacion","fecha_creacion","fecha_actual"];static \u0275fac=function(i){return new(i||e)};static \u0275cmp=h({type:e,selectors:[["app-popup-detalle-solicitud-de-compra"]],inputs:{data:"data"},outputs:{close:"close",atender:"atender"},decls:29,vars:3,consts:[[1,"popup-overlay"],[1,"popup-container"],[1,"popup-header"],[1,"table-container"],["mat-table","",1,"mat-elevation-z2",3,"dataSource"],["matColumnDef","id_solicitud"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id_producto"],["matColumnDef","cantidad"],["matColumnDef","observacion"],["matColumnDef","fecha_creacion"],["matColumnDef","fecha_actual"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-stroked-button","","color","primary",3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(i,l){i&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),a(4,"Detalle de solicitud de compra"),o()(),n(5,"div",3)(6,"table",4),c(7,5),m(8,Zi,2,0,"th",6)(9,en,2,1,"td",7),p(),c(10,8),m(11,tn,2,0,"th",6)(12,nn,2,1,"td",7),p(),c(13,9),m(14,on,2,0,"th",6)(15,an,2,1,"td",7),p(),c(16,10),m(17,rn,2,0,"th",6)(18,ln,2,1,"td",7),p(),c(19,11),m(20,mn,2,0,"th",6)(21,dn,2,1,"td",7),p(),c(22,12),m(23,cn,2,0,"th",6)(24,pn,2,1,"td",7),p(),m(25,sn,1,0,"tr",13)(26,un,1,0,"tr",14),o()(),n(27,"button",15),_("click",function(){return l.close.emit()}),a(28,"Cerrar"),o()()()),i&2&&(r(6),f("dataSource",l.data),r(19),f("matHeaderRowDef",l.displayedColumns),r(),f("matRowDefColumns",l.displayedColumns))},dependencies:[v,N,M,w,y,E,R,I,q,O,A,k,P,T],styles:[".popup-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000073;display:flex;align-items:center;justify-content:center;z-index:1200}.popup-container[_ngcontent-%COMP%]{background:#fff;padding:25px 35px;border-radius:10px;width:600px;color:#1f3b73;box-shadow:0 4px 12px #00000040}.table-container[_ngcontent-%COMP%]{max-height:220px;overflow-y:auto;margin-bottom:15px;border:1px solid #c5d4f1;border-radius:6px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background-color:#f9fbff}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:8px 10px;border-bottom:1px solid #d8e2f4;text-align:left;font-size:14px}th[_ngcontent-%COMP%]{background-color:#e5edff;color:#1b3e83}button[_ngcontent-%COMP%]{margin-top:8px}"]})};function _n(e,t){e&1&&(n(0,"th",18),a(1," ID Orden "),o())}function Cn(e,t){if(e&1&&(n(0,"td",19),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.id_orden_dist," ")}}function bn(e,t){e&1&&(n(0,"th",18),a(1," ID Lote "),o())}function hn(e,t){if(e&1&&(n(0,"td",19),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.id_lote," ")}}function Dn(e,t){e&1&&(n(0,"th",18),a(1," ID Producto "),o())}function gn(e,t){if(e&1&&(n(0,"td",19),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.id_producto," ")}}function Sn(e,t){e&1&&(n(0,"th",18),a(1," Cantidad "),o())}function xn(e,t){if(e&1&&(n(0,"td",19),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.cantidad," ")}}function vn(e,t){e&1&&(n(0,"th",18),a(1," Condiciones Transporte "),o())}function Tn(e,t){if(e&1&&(n(0,"td",19),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.condiciones_transporte||"-"," ")}}function Pn(e,t){e&1&&(n(0,"th",18),a(1," Temp. Requerida "),o())}function Mn(e,t){if(e&1&&(n(0,"td",19),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.temperatura_requerida||"-"," ")}}function Rn(e,t){e&1&&(n(0,"th",18),a(1," Observaciones "),o())}function wn(e,t){if(e&1&&(n(0,"td",19),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.observaciones||"-"," ")}}function En(e,t){e&1&&(n(0,"th",18),a(1," Fecha Creaci\xF3n "),o())}function qn(e,t){if(e&1&&(n(0,"td",19),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.fecha_creacion||"-"," ")}}function On(e,t){e&1&&b(0,"tr",20)}function yn(e,t){e&1&&b(0,"tr",21)}var oe=class e{data=[];close=new D;atender=new D;displayedColumns=["id_orden_dist","id_lote","id_producto","cantidad","condiciones_transporte","temperatura_requerida","observaciones","fecha_creacion"];static \u0275fac=function(i){return new(i||e)};static \u0275cmp=h({type:e,selectors:[["app-popup-detalle-orden-distribucion"]],inputs:{data:"data"},outputs:{close:"close",atender:"atender"},decls:35,vars:3,consts:[[1,"popup-overlay"],[1,"popup-container"],[1,"popup-header"],[1,"table-container"],["mat-table","",1,"mat-elevation-z2",3,"dataSource"],["matColumnDef","id_orden_dist"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id_lote"],["matColumnDef","id_producto"],["matColumnDef","cantidad"],["matColumnDef","condiciones_transporte"],["matColumnDef","temperatura_requerida"],["matColumnDef","observaciones"],["matColumnDef","fecha_creacion"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-stroked-button","","color","primary",3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(i,l){i&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),a(4,"Detalle de orden de distribuci\xF3n"),o()(),n(5,"div",3)(6,"table",4),c(7,5),m(8,_n,2,0,"th",6)(9,Cn,2,1,"td",7),p(),c(10,8),m(11,bn,2,0,"th",6)(12,hn,2,1,"td",7),p(),c(13,9),m(14,Dn,2,0,"th",6)(15,gn,2,1,"td",7),p(),c(16,10),m(17,Sn,2,0,"th",6)(18,xn,2,1,"td",7),p(),c(19,11),m(20,vn,2,0,"th",6)(21,Tn,2,1,"td",7),p(),c(22,12),m(23,Pn,2,0,"th",6)(24,Mn,2,1,"td",7),p(),c(25,13),m(26,Rn,2,0,"th",6)(27,wn,2,1,"td",7),p(),c(28,14),m(29,En,2,0,"th",6)(30,qn,2,1,"td",7),p(),m(31,On,1,0,"tr",15)(32,yn,1,0,"tr",16),o()(),n(33,"button",17),_("click",function(){return l.close.emit()}),a(34,"Cerrar"),o()()()),i&2&&(r(6),f("dataSource",l.data),r(25),f("matHeaderRowDef",l.displayedColumns),r(),f("matRowDefColumns",l.displayedColumns))},dependencies:[v,N,M,w,y,E,R,I,q,O,A,k,P,T],styles:[".popup-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000073;display:flex;align-items:center;justify-content:center;z-index:1200}.popup-container[_ngcontent-%COMP%]{background:#fff;padding:25px 35px;border-radius:10px;width:720px;color:#1f3b73;box-shadow:0 4px 12px #00000040}.table-container[_ngcontent-%COMP%]{max-height:260px;overflow-y:auto;margin-bottom:15px;border:1px solid #c5d4f1;border-radius:6px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background-color:#f9fbff}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:8px 10px;border-bottom:1px solid #d8e2f4;text-align:left;font-size:14px}th[_ngcontent-%COMP%]{background-color:#e5edff;color:#1b3e83}button[_ngcontent-%COMP%]{margin-top:8px}"]})};function An(e,t){if(e&1&&(n(0,"section"),b(1,"app-requerimientos-pendientes-table",3),o()),e&2){let i=C();r(),f("data",i.filteredRequerimientosData)}}function kn(e,t){if(e&1){let i=x();n(0,"section")(1,"app-orden-distribucion-table",4),_("verDetalle",function(d){g(i);let u=C();return S(u.openDistribucion(d))}),o()()}if(e&2){let i=C();r(),f("data",i.filteredOrdenData)}}function Nn(e,t){if(e&1){let i=x();n(0,"section")(1,"app-solicitud-compras-table",4),_("verDetalle",function(d){g(i);let u=C();return S(u.openSolicitud(d))}),o()()}if(e&2){let i=C();r(),f("data",i.filteredSolicitudData)}}function Fn(e,t){if(e&1){let i=x();n(0,"app-popup-detalle-orden-distribucion",5),_("close",function(){g(i);let d=C();return S(d.showPopupDistribucion=!1)}),o()}if(e&2){let i=C();f("data",i.distribucionDetalle)}}function $n(e,t){if(e&1){let i=x();n(0,"app-popup-detalle-solicitud-de-compra",5),_("close",function(){g(i);let d=C();return S(d.showPopupSolicitud=!1)}),o()}if(e&2){let i=C();f("data",i.solicitudDetalle)}}var Pe=class e{constructor(t){this.programacionService=t}currentMode="REQUERIMIENTOS";requerimientosDataOriginal=[];filteredRequerimientosData=[];ordenDataOriginal=[];filteredOrdenData=[];solicitudDataOriginal=[];filteredSolicitudData=[];showPopupDistribucion=!1;distribucionDetalle=[];showPopupSolicitud=!1;solicitudDetalle=[];ngOnInit(){this.programacionService.getRequerimientosAtendidos().subscribe(t=>{this.requerimientosDataOriginal=t,this.currentMode==="REQUERIMIENTOS"&&this.applyFilter("",this.currentMode)}),this.programacionService.getOrdenDistribucion().subscribe(t=>{this.ordenDataOriginal=t,this.currentMode==="DISTRIBUCION"&&this.applyFilter("",this.currentMode)}),this.programacionService.getSolicitudCompra().subscribe(t=>{this.solicitudDataOriginal=t,this.currentMode==="COMPRAS"&&this.applyFilter("",this.currentMode)})}onFilter(t){this.currentMode=t.modo,this.applyFilter(t.term,t.modo)}applyFilter(t,i){let l=t.trim().toLowerCase();i==="REQUERIMIENTOS"?this.filteredRequerimientosData=this.requerimientosDataOriginal.filter(d=>!l||d.id_req.toLowerCase().includes(l)):i==="DISTRIBUCION"?this.filteredOrdenData=this.ordenDataOriginal.filter(d=>!l||d.id_orden_dist.toLowerCase().includes(l)):this.filteredSolicitudData=this.solicitudDataOriginal.filter(d=>!l||d.id_solicitud.toLowerCase().includes(l))}openDistribucion(t){this.distribucionDetalle=this.programacionService.getOrdenDistribucionById(t),this.showPopupDistribucion=!0}openSolicitud(t){this.solicitudDetalle=this.programacionService.getSolicitudCompraById(t),this.showPopupSolicitud=!0}static \u0275fac=function(i){return new(i||e)(L(z))};static \u0275cmp=h({type:e,selectors:[["app-lista-requerimientos-atendidos"]],standalone:!1,decls:6,vars:5,consts:[[3,"filterChange"],[4,"ngIf"],[3,"data","close",4,"ngIf"],[3,"data"],[3,"verDetalle","data"],[3,"close","data"]],template:function(i,l){i&1&&(n(0,"app-search-bar-atendidos",0),_("filterChange",function(u){return l.onFilter(u)}),o(),m(1,An,2,1,"section",1)(2,kn,2,1,"section",1)(3,Nn,2,1,"section",1)(4,Fn,1,1,"app-popup-detalle-orden-distribucion",2)(5,$n,1,1,"app-popup-detalle-solicitud-de-compra",2)),i&2&&(r(),f("ngIf",l.currentMode==="REQUERIMIENTOS"),r(),f("ngIf",l.currentMode==="DISTRIBUCION"),r(),f("ngIf",l.currentMode==="COMPRAS"),r(),f("ngIf",l.showPopupDistribucion),r(),f("ngIf",l.showPopupSolicitud))},dependencies:[j,ee,te,ie,ne,oe,Z],encapsulation:2})};var Bn=[{path:"",component:ce},{path:"lista-requerimiento",component:ce},{path:"lista-requerimientos-atendidos",component:Pe},{path:"disponibilidad-producto/:id",component:ve}],Me=class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=_e({type:e});static \u0275inj=fe({imports:[Ie.forChild(Bn),Ie]})};function Vn(e,t){e&1&&(n(0,"th",16),a(1," ID Requerimiento "),o())}function Hn(e,t){if(e&1&&(n(0,"td",17),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.id_requerimiento," ")}}function Ln(e,t){e&1&&(n(0,"th",16),a(1," ID Producto "),o())}function Un(e,t){if(e&1&&(n(0,"td",17),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.id_producto," ")}}function jn(e,t){e&1&&(n(0,"th",16),a(1," Cantidad "),o())}function zn(e,t){if(e&1&&(n(0,"td",17),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.cantidad," ")}}function Qn(e,t){e&1&&(n(0,"th",16),a(1," Observaci\xF3n "),o())}function Wn(e,t){if(e&1&&(n(0,"td",17),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.observacion||"-"," ")}}function Gn(e,t){e&1&&(n(0,"th",16),a(1," Fecha Creaci\xF3n "),o())}function Jn(e,t){if(e&1&&(n(0,"td",17),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.fecha_creacion||"-"," ")}}function Kn(e,t){e&1&&(n(0,"th",16),a(1," Fecha Actualizaci\xF3n "),o())}function Xn(e,t){if(e&1&&(n(0,"td",17),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.fecha_actual||"-"," ")}}function Yn(e,t){e&1&&b(0,"tr",18)}function Zn(e,t){e&1&&b(0,"tr",19)}var Re=class e{data=[];close=new D;atender=new D;displayedColumns=["id_requerimiento","id_producto","cantidad","observacion","fecha_creacion","fecha_actual"];static \u0275fac=function(i){return new(i||e)};static \u0275cmp=h({type:e,selectors:[["app-popup-detalle-de-requerimiento"]],inputs:{data:"data"},outputs:{close:"close",atender:"atender"},decls:29,vars:3,consts:[[1,"popup-overlay"],[1,"popup-container"],[1,"popup-header"],[1,"table-container"],["mat-table","",1,"mat-elevation-z2",3,"dataSource"],["matColumnDef","id_requerimiento"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id_producto"],["matColumnDef","cantidad"],["matColumnDef","observacion"],["matColumnDef","fecha_creacion"],["matColumnDef","fecha_actual"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-stroked-button","","color","primary",3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(i,l){i&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),a(4,"Detalle del requerimiento"),o()(),n(5,"div",3)(6,"table",4),c(7,5),m(8,Vn,2,0,"th",6)(9,Hn,2,1,"td",7),p(),c(10,8),m(11,Ln,2,0,"th",6)(12,Un,2,1,"td",7),p(),c(13,9),m(14,jn,2,0,"th",6)(15,zn,2,1,"td",7),p(),c(16,10),m(17,Qn,2,0,"th",6)(18,Wn,2,1,"td",7),p(),c(19,11),m(20,Gn,2,0,"th",6)(21,Jn,2,1,"td",7),p(),c(22,12),m(23,Kn,2,0,"th",6)(24,Xn,2,1,"td",7),p(),m(25,Yn,1,0,"tr",13)(26,Zn,1,0,"tr",14),o()(),n(27,"button",15),_("click",function(){return l.close.emit()}),a(28,"Cerrar"),o()()()),i&2&&(r(6),f("dataSource",l.data),r(19),f("matHeaderRowDef",l.displayedColumns),r(),f("matRowDefColumns",l.displayedColumns))},dependencies:[v,N,M,w,y,E,R,I,q,O,A,k,P,T],styles:[".popup-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000073;display:flex;align-items:center;justify-content:center;z-index:1200}.popup-container[_ngcontent-%COMP%]{background:#fff;padding:25px 35px;border-radius:10px;width:600px;color:#1f3b73;box-shadow:0 4px 12px #00000040}.info-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0}.table-container[_ngcontent-%COMP%]{max-height:220px;overflow-y:auto;margin-bottom:15px;border:1px solid #c5d4f1;border-radius:6px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background-color:#f9fbff}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:8px 10px;border-bottom:1px solid #d8e2f4;text-align:left;font-size:14px}th[_ngcontent-%COMP%]{background-color:#e5edff;color:#1b3e83}.incidencia-section[_ngcontent-%COMP%]{background-color:#f5f8ff;padding:10px 12px;border-radius:8px;border-left:4px solid #1f64ff;margin-top:15px}.button-group[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:20px;gap:10px}.button[_ngcontent-%COMP%]{border:round;padding:8px 14px;border-radius:6px;cursor:pointer;font-weight:500}.resolve-btn[_ngcontent-%COMP%]{background-color:#1f64ff;color:#fff}.back-btn[_ngcontent-%COMP%]{background-color:#ccc;color:#333}.resuelta[_ngcontent-%COMP%]{color:#1ba14e;font-weight:600}"]})};var tt=class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=_e({type:e});static \u0275inj=fe({imports:[Me,v,N,P,Ye,W,je,Ze,K,X,Y,G,Ge,ee,te,ie,Re,ne,oe]})};export{tt as ProgramacionModule};
