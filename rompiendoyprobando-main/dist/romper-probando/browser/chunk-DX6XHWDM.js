import{a as pe,b as he,c as Pe,g as Et,h as Mt,i as ue,j as It}from"./chunk-DXCHC2D2.js";import{a as me,b as Xe}from"./chunk-4DUNT3H5.js";import"./chunk-VN3CQEPZ.js";import"./chunk-JINNKTRQ.js";import{p as wt}from"./chunk-JXCPYOSY.js";import{$ as C,$b as xe,$c as Pt,A as Ze,Ac as pt,B as Ve,Bc as ht,Cc as ut,Dc as z,E as b,Ec as L,F as y,Fa as je,Fc as B,Ga as Ge,Gc as ft,Ha as a,Hc as N,Ia as S,Ic as H,Ja as p,Jc as vt,Ka as re,Kc as V,La as Q,Lc as j,Ma as W,Mc as _t,Na as K,Nc as G,Oc as q,Pc as gt,Qc as U,R as c,Ra as w,S as R,Sc as Ct,Ta as x,Tc as bt,Ua as ce,Va as E,Vc as yt,Wb as Ue,Wc as xt,Y as g,Zb as et,_b as tt,a as oe,aa as ae,b as Ke,bc as it,bd as St,db as D,dc as ot,ea as l,ed as Y,f as X,fb as de,fc as nt,fd as $e,g as He,gb as O,h as fe,ha as I,hb as Ye,ia as T,jc as F,kb as Je,lc as ee,ma as s,mb as ye,na as n,nc as A,oa as o,ob as le,oc as at,pa as h,pb as se,qa as u,qb as qe,qc as Z,r as ie,ra as f,rc as rt,sc as ct,ta as P,tc as dt,uc as lt,va as v,wa as _,y as be,yc as st,z as ne,zc as mt}from"./chunk-26SCTFAY.js";var Se=class e{constructor(t,i){this.dialogRef=t;this.data=i}onConfirmar(){this.dialogRef.close({confirmado:!0})}onCancelar(){this.dialogRef.close({confirmado:!1})}static \u0275fac=function(i){return new(i||e)(g(pe),g(he))};static \u0275cmp=C({type:e,selectors:[["app-popup-confirmacion-eliminacion"]],standalone:!1,decls:21,vars:3,consts:[["color","warn"],[1,"dialog-title"],[1,"spacer"],[3,"click"],["mat-dialog-content","",1,"dialog-content"],[1,"message-area"],["mat-dialog-actions","","align","end"],["type","button","color","primary",3,"click"],["color","warn",3,"click"]],template:function(i,r){i&1&&(n(0,"mat-toolbar",0)(1,"span",1),a(2),o(),h(3,"span",2),n(4,"button",3),v("click",function(){return r.onCancelar()}),a(5," Close "),o()(),n(6,"div",4)(7,"div",5)(8,"p"),a(9),o(),n(10,"p")(11,"strong"),a(12,"\xCDtem:"),o(),a(13),o(),n(14,"p"),a(15,"\xBFDesea continuar con esta acci\xF3n?"),o()()(),n(16,"div",6)(17,"button",7),v("click",function(){return r.onCancelar()}),a(18," Cancelar "),o(),n(19,"button",8),v("click",function(){return r.onConfirmar()}),a(20," S\xED, Eliminar "),o()()),i&2&&(c(2),S(r.data.titulo),c(7),S(r.data.mensaje),c(4),p(" ",r.data.itemNombre))},dependencies:[me],styles:[".mat-toolbar[_ngcontent-%COMP%]{background-color:#d9534f!important;color:#fff;padding:0 20px;min-height:56px}.dialog-title[_ngcontent-%COMP%]{font-weight:600;font-size:1.1rem}.dialog-content[_ngcontent-%COMP%]{padding:24px 30px;color:#333;font-size:1rem}.message-area[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:10px;line-height:1.4}.message-area[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#1f3b73;font-weight:700}.mat-dialog-actions[_ngcontent-%COMP%]{padding:16px 24px;gap:10px}.mat-button[color=primary][_ngcontent-%COMP%]{background-color:#f0f0f0!important;color:#1f3b73!important;border:1px solid #ccc;font-weight:500}.mat-raised-button[color=warn][_ngcontent-%COMP%]{background-color:#d9534f!important;color:#fff!important;font-weight:600}"]})};var te=class e{proveedoresMock=[{id:1,nombreProveedor:"TecnoCorp SA",ruc:"20123456781",direccion:"Av. Los Andes 123",telefono:"987654321",correo:"ventas@tecnocorp.com",estado:!0},{id:2,nombreProveedor:"Global Supply SRL",ruc:"20987654322",direccion:"Calle Central 456",telefono:"998877665",correo:"contacto@globalsupply.com",estado:!0},{id:3,nombreProveedor:"Metalurgica F\xE9nix",ruc:"20112233443",direccion:"Jr. Aceros 789",telefono:"900112233",correo:"info@fenix.pe",estado:!1}];nextId=4;constructor(){}getListadoProveedores(){return console.log("[ProveedorService] Obteniendo listado de proveedores."),X(this.proveedoresMock)}createProveedor(t){console.log("[ProveedorService] Creando proveedor:",t);let i={id:this.nextId++,nombreProveedor:t.nombreProveedor,ruc:t.ruc,direccion:t.direccion,telefono:t.telefono,correo:t.correo,estado:!0};return this.proveedoresMock.push(i),X(i)}updateProveedor(t,i){console.log(`[ProveedorService] Actualizando proveedor ${t}:`,i);let r=this.proveedoresMock.findIndex(m=>m.id===t);if(r===-1)return He(()=>new Error(`Proveedor con ID ${t} no encontrado.`));let d=oe(oe({},this.proveedoresMock[r]),i);return this.proveedoresMock[r]=d,X(d)}deleteProveedor(t){console.log(`[ProveedorService] Eliminando proveedor ${t}`);let i=this.proveedoresMock.length;return this.proveedoresMock=this.proveedoresMock.filter(r=>r.id!==t),this.proveedoresMock.length===i?He(()=>new Error(`Proveedor con ID ${t} no encontrado.`)):X(void 0)}static \u0275fac=function(i){return new(i||e)};static \u0275prov=be({token:e,factory:e.\u0275fac,providedIn:"root"})};var Ft=["class","component"];function At(e,t){e&1&&(n(0,"div",6)(1,"h4"),a(2,"ID del Proveedor:"),o(),h(3,"input",17),o())}function zt(e,t){e&1&&(n(0,"mat-error"),a(1,"El RUC es requerido."),o())}function Lt(e,t){e&1&&(n(0,"mat-error"),a(1,"Formato de RUC inv\xE1lido (10-15 d\xEDgitos)."),o())}function Bt(e,t){e&1&&(n(0,"mat-error"),a(1,"El nombre es requerido."),o())}function Nt(e,t){e&1&&(n(0,"mat-error"),a(1,"Correo electr\xF3nico inv\xE1lido."),o())}function Ht(e,t){if(e&1&&(n(0,"mat-checkbox",13),a(1),o()),e&2){let i=_();c(),p(" Proveedor ",i.f.estado.value?"Activo":"Inactivo"," ")}}var ve=class e{constructor(t,i,r,d){this.dialogRef=t;this.data=i;this.fb=r;this.proveedorService=d}proveedorForm;isEditMode=!1;dialogTitle="Crear Nuevo Proveedor";isLoading=!1;originalProveedor;ngOnInit(){this.isEditMode=this.data.mode==="edit",this.initForm(),this.isEditMode&&this.data.proveedor?(this.dialogTitle=`Editar Proveedor N\xB0 ${this.data.proveedor.id}`,this.originalProveedor=this.data.proveedor,this.loadFormData(this.data.proveedor)):this.dialogTitle="Registrar Nuevo Proveedor"}initForm(){this.proveedorForm=this.fb.group({id:[{value:"",disabled:!0}],nombreProveedor:["",[ee.required,ee.maxLength(150)]],ruc:["",[ee.required,ee.pattern(/^[0-9]{10,15}$/)]],direccion:[""],telefono:["",[ee.maxLength(20)]],correo:["",[ee.email,ee.maxLength(150)]],estado:[!0]}),this.isEditMode?this.proveedorForm.get("ruc")?.disable():this.proveedorForm.get("estado")?.disable()}loadFormData(t){this.proveedorForm.patchValue({id:t.id,nombreProveedor:t.nombreProveedor,ruc:t.ruc,direccion:t.direccion,telefono:t.telefono,correo:t.correo,estado:t.estado})}onSubmit(){if(this.proveedorForm.invalid){this.proveedorForm.markAllAsTouched();return}let t=this.proveedorForm.getRawValue();this.isLoading=!0,this.isEditMode?this.handleUpdate(t):this.handleCreate(t)}handleCreate(t){let i={nombreProveedor:t.nombreProveedor,ruc:t.ruc,direccion:t.direccion,telefono:t.telefono,correo:t.correo};this.proveedorService.createProveedor(i).pipe(ie(()=>this.isLoading=!1)).subscribe({next:r=>{this.dialogRef.close({success:!0,data:r})},error:r=>{console.error("Error al crear proveedor:",r),alert("Error al crear proveedor. Verifique los datos.")}})}handleUpdate(t){let i=t.id,r={nombreProveedor:t.nombreProveedor,direccion:t.direccion,telefono:t.telefono,correo:t.correo,estado:t.estado};this.proveedorService.updateProveedor(i,r).pipe(ie(()=>this.isLoading=!1)).subscribe({next:d=>{this.dialogRef.close({success:!0,data:d})},error:d=>{console.error("Error al actualizar proveedor:",d),alert("Error al actualizar proveedor. Verifique los datos.")}})}onCancel(){this.dialogRef.close({success:!1})}get f(){return this.proveedorForm.controls}static \u0275fac=function(i){return new(i||e)(g(pe),g(he),g(pt),g(te))};static \u0275cmp=C({type:e,selectors:[["app-popup-proveedor-form",8,"component"]],standalone:!1,attrs:Ft,decls:39,vars:12,consts:[["color","primary"],[1,"dialog-title"],[1,"spacer"],[3,"click","disabled"],[1,"dialog-form",3,"ngSubmit","formGroup"],["mat-dialog-content","",1,"form-content"],[1,"form-field-group","full-width"],["formControlName","ruc","type","text"],[4,"ngIf"],["formControlName","nombreProveedor","maxlength","150"],["formControlName","direccion"],["formControlName","telefono","maxlength","20"],["formControlName","correo","type","email","maxlength","150"],["formControlName","estado","color","primary",1,"full-width","status-checkbox"],["mat-dialog-actions","","align","end"],["type","button",3,"click","disabled"],["color","primary","type","submit",3,"disabled"],["formControlName","id"]],template:function(i,r){i&1&&(n(0,"mat-toolbar",0)(1,"span",1),a(2),o(),h(3,"span",2),n(4,"button",3),v("click",function(){return r.onCancel()}),a(5," Close "),o()(),n(6,"form",4),v("ngSubmit",function(){return r.onSubmit()}),n(7,"div",5),I(8,At,4,0,"div",6),n(9,"div",6)(10,"h4"),a(11,"RUC:"),o(),h(12,"input",7),l(13,zt,2,0,"mat-error",8)(14,Lt,2,0,"mat-error",8),o(),n(15,"div",6)(16,"h4"),a(17,"Nombre del Proveedor:"),o(),h(18,"input",9),l(19,Bt,2,0,"mat-error",8),o(),n(20,"div",6)(21,"h4"),a(22,"Direcci\xF3n:"),o(),h(23,"input",10),o(),n(24,"div",6)(25,"h4"),a(26,"Tel\xE9fono:"),o(),h(27,"input",11),o(),n(28,"div",6)(29,"h4"),a(30,"Correo Electr\xF3nico:"),o(),h(31,"input",12),l(32,Nt,2,0,"mat-error",8),o(),I(33,Ht,2,1,"mat-checkbox",13),o(),n(34,"div",14)(35,"button",15),v("click",function(){return r.onCancel()}),a(36," Cancelar "),o(),n(37,"button",16),a(38),o()()()),i&2&&(c(2),S(r.dialogTitle),c(2),s("disabled",r.isLoading),c(2),s("formGroup",r.proveedorForm),c(2),T(r.isEditMode?8:-1),c(5),s("ngIf",r.f.ruc.hasError("required")),c(),s("ngIf",r.f.ruc.hasError("pattern")),c(5),s("ngIf",r.f.nombreProveedor.hasError("required")),c(13),s("ngIf",r.f.correo.hasError("email")),c(),T(r.isEditMode?33:-1),c(2),s("disabled",r.isLoading),c(2),s("disabled",r.proveedorForm.invalid||r.isLoading),c(),p(" ",r.isEditMode?"Guardar Cambios":"Registrar Proveedor"," "))},dependencies:[me,Et,yt,D,rt,F,A,at,mt,dt,lt],styles:[".mat-toolbar[_ngcontent-%COMP%]{background-color:#20407b!important;color:#fff;padding:0 24px;height:64px}.dialog-title[_ngcontent-%COMP%]{font-weight:600;font-size:1.25rem}.form-content[_ngcontent-%COMP%]{padding:24px 24px 16px;display:grid;gap:8px}.form-field-group[_ngcontent-%COMP%]{margin:0}.form-field-group[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#1f3b73;font-size:14px;font-weight:500;margin-bottom:4px;margin-top:0}.full-width[_ngcontent-%COMP%]{width:100%;margin:0!important;padding-top:0!important}.mat-mdc-form-field-subscript-wrapper[_ngcontent-%COMP%]{padding:0}.mat-mdc-text-field-wrapper[_ngcontent-%COMP%]{background-color:#f5f8ff!important;border-radius:5px}.mat-mdc-text-field-wrapper[_ngcontent-%COMP%]   .mat-mdc-form-field-flex[_ngcontent-%COMP%]{border:1px solid #a0b5da;border-radius:5px;padding:0 10px}.mat-mdc-input-element[_ngcontent-%COMP%]{color:#1f3b73;font-size:14px}.status-checkbox[_ngcontent-%COMP%]{margin-top:10px;color:#1f3b73}.mat-mdc-dialog-actions[_ngcontent-%COMP%]{padding:16px 24px;gap:10px}.mat-mdc-button[_ngcontent-%COMP%], .mat-mdc-raised-button[_ngcontent-%COMP%]{border:none;padding:8px 14px;border-radius:6px;font-weight:500}.mat-mdc-button[color=basic][_ngcontent-%COMP%]{background-color:#ccc!important;color:#333!important}.mat-mdc-raised-button[color=primary][_ngcontent-%COMP%]{background-color:#1f64ff!important;color:#fff!important}mat-spinner[_ngcontent-%COMP%]{margin:0 4px}"]})};var Vt=()=>[];function jt(e,t){e&1&&(n(0,"th",15),a(1," ID "),o())}function Gt(e,t){if(e&1&&(n(0,"td",16),a(1),o()),e&2){let i=t.$implicit;c(),p(" ",i.id," ")}}function qt(e,t){e&1&&(n(0,"th",15),a(1," Nombre Proveedor "),o())}function Ut(e,t){if(e&1&&(n(0,"td",16),a(1),o()),e&2){let i=t.$implicit;c(),p(" **",i.nombreProveedor,"** ")}}function $t(e,t){e&1&&(n(0,"th",15),a(1," RUC "),o())}function Qt(e,t){if(e&1&&(n(0,"td",16),a(1),o()),e&2){let i=t.$implicit;c(),p(" ",i.ruc," ")}}function Wt(e,t){e&1&&(n(0,"th",15),a(1," Tel\xE9fono "),o())}function Kt(e,t){if(e&1&&(n(0,"td",16),a(1),o()),e&2){let i=t.$implicit;c(),p(" ",i.telefono," ")}}function Zt(e,t){e&1&&(n(0,"th",15),a(1," Correo "),o())}function Yt(e,t){if(e&1&&(n(0,"td",16),a(1),o()),e&2){let i=t.$implicit;c(),p(" ",i.correo," ")}}function Jt(e,t){e&1&&(n(0,"th",15),a(1," Estado "),o())}function Xt(e,t){if(e&1&&(n(0,"td",16)(1,"span"),a(2),o()()),e&2){let i=t.$implicit;c(),je("activo",i.estado)("inactivo",!i.estado),c(),p(" ",i.estado?"ACTIVO":"INACTIVO"," ")}}function ei(e,t){e&1&&(n(0,"th",15),a(1," Modificar "),o())}function ti(e,t){if(e&1){let i=P();n(0,"td",16)(1,"button",17),v("click",function(){let d=b(i).$implicit,m=_();return y(m.onEditar(d))}),a(2," Editar Proveedor "),o()()}}function ii(e,t){e&1&&(n(0,"th",15),a(1," Eliminar "),o())}function oi(e,t){if(e&1){let i=P();n(0,"td",16)(1,"button",18),v("click",function(){let d=b(i).$implicit,m=_();return y(m.onEliminar(d))}),a(2," Eliminar Proveedor "),o()()}}function ni(e,t){e&1&&h(0,"tr",19)}function ai(e,t){e&1&&h(0,"tr",20)}function ri(e,t){e&1&&(n(0,"div",21),a(1," No hay proveedores registrados. "),o())}var Ee=class e{proveedores=[];displayedColumns=["id","nombreProveedor","ruc","telefono","correo","estado","modificar","eliminar"];editar=new R;eliminar=new R;onEditar(t){this.editar.emit(t)}onEliminar(t){this.eliminar.emit(t)}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=C({type:e,selectors:[["app-proveedores-table"]],inputs:{proveedores:"proveedores"},outputs:{editar:"editar",eliminar:"eliminar"},standalone:!1,decls:29,vars:5,consts:[[1,"table-container","mat-elevation-z2"],["mat-table","",1,"full-width",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","nombreProveedor"],["matColumnDef","ruc"],["matColumnDef","telefono"],["matColumnDef","correo"],["matColumnDef","estado"],["matColumnDef","modificar"],["matColumnDef","eliminar"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","no-data-message",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],["color","accent",3,"click"],["color","warn",3,"click"],["mat-header-row",""],["mat-row",""],[1,"no-data-message"]],template:function(i,r){i&1&&(n(0,"div",0)(1,"table",1),u(2,2),l(3,jt,2,0,"th",3)(4,Gt,2,1,"td",4),f(),u(5,5),l(6,qt,2,0,"th",3)(7,Ut,2,1,"td",4),f(),u(8,6),l(9,$t,2,0,"th",3)(10,Qt,2,1,"td",4),f(),u(11,7),l(12,Wt,2,0,"th",3)(13,Kt,2,1,"td",4),f(),u(14,8),l(15,Zt,2,0,"th",3)(16,Yt,2,1,"td",4),f(),u(17,9),l(18,Jt,2,0,"th",3)(19,Xt,3,5,"td",4),f(),u(20,10),l(21,ei,2,0,"th",3)(22,ti,3,0,"td",4),f(),u(23,11),l(24,ii,2,0,"th",3)(25,oi,3,0,"td",4),f(),l(26,ni,1,0,"tr",12)(27,ai,1,0,"tr",13),o(),l(28,ri,2,0,"div",14),o()),i&2&&(c(),s("dataSource",r.proveedores||w(4,Vt)),c(25),s("matHeaderRowDef",r.displayedColumns),c(),s("matRowDefColumns",r.displayedColumns),c(),s("ngIf",!(r.proveedores!=null&&r.proveedores.length)))},dependencies:[z,B,j,N,L,G,H,V,q,U,D],styles:[".table-container[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto}table[_ngcontent-%COMP%]{width:100%}th[_ngcontent-%COMP%]{background-color:#e0f0ff;color:#1e3a8a;font-weight:700}button[_ngcontent-%COMP%]{color:#1e3a8a;font-weight:500}"]})};var li=["class","component"];function si(e,t){e&1&&(n(0,"div",6),h(1,"mat-progress-spinner",7),n(2,"p"),a(3,"Cargando listado de proveedores..."),o()())}function mi(e,t){if(e&1){let i=P();n(0,"app-proveedores-table",10),v("editar",function(d){b(i);let m=_(2);return y(m.onEditarProveedor(d))})("eliminar",function(d){b(i);let m=_(2);return y(m.onEliminarProveedor(d))}),o()}if(e&2){let i=_(2);s("proveedores",i.getProveedoresFiltrados())}}function pi(e,t){e&1&&(n(0,"div",9)(1,"h2"),a(2,"No se encontraron Proveedores"),o(),n(3,"p"),a(4,"Ajuste los criterios de b\xFAsqueda o use el bot\xF3n superior para registrar uno nuevo."),o()())}function hi(e,t){if(e&1&&I(0,mi,1,1,"app-proveedores-table",8)(1,pi,5,0,"div",9),e&2){let i=_();T(i.getProveedoresFiltrados()&&i.getProveedoresFiltrados().length>0?0:1)}}var Me=class e{constructor(t,i){this.proveedorService=t;this.dialog=i}proveedores=null;isLoading=!0;filtroBusqueda="";ngOnInit(){this.cargarProveedores()}cargarProveedores(){this.isLoading=!0,this.proveedorService.getListadoProveedores().subscribe({next:t=>{this.proveedores=t,this.isLoading=!1},error:t=>{console.error("Error al cargar proveedores:",t),this.isLoading=!1}})}handleDialogResult(t){if(t?.success&&t.data){let i=t.data;if(this.proveedores){let r=this.proveedores.findIndex(d=>d.id===i.id);r!==-1?this.proveedores[r]=i:this.proveedores.push(i),this.proveedores=[...this.proveedores]}}}onCrearProveedor(){let t={mode:"create"};this.dialog.open(ve,{width:"600px",data:t}).afterClosed().subscribe(this.handleDialogResult.bind(this))}onEditarProveedor(t){let i={mode:"edit",proveedor:t};this.dialog.open(ve,{width:"600px",data:i}).afterClosed().subscribe(this.handleDialogResult.bind(this))}onEliminarProveedor(t){let i={titulo:"Confirmaci\xF3n de Eliminaci\xF3n",mensaje:`\xBFRealmente desea eliminar al proveedor con RUC: ${t.ruc}? Esta acci\xF3n no se puede deshacer.`,itemNombre:t.nombreProveedor};this.dialog.open(Se,{width:"450px",data:i}).afterClosed().subscribe(d=>{d?.confirmado&&this.ejecutarEliminacion(t.id)})}ejecutarEliminacion(t){this.isLoading=!0,this.proveedorService.deleteProveedor(t).pipe(ie(()=>this.isLoading=!1)).subscribe({next:()=>{alert(`Proveedor #${t} eliminado con \xE9xito.`),this.proveedores&&(this.proveedores=this.proveedores.filter(i=>i.id!==t),this.proveedores=[...this.proveedores])},error:i=>{console.error("Error al eliminar proveedor:",i),alert("No se pudo eliminar el proveedor. Error de servicio.")}})}getProveedoresFiltrados(){if(!this.proveedores)return null;if(!this.filtroBusqueda)return this.proveedores;let t=this.filtroBusqueda.toLowerCase();return this.proveedores.filter(i=>i.nombreProveedor.toLowerCase().includes(t)||i.ruc.includes(t))}static \u0275fac=function(i){return new(i||e)(g(te),g(Pe))};static \u0275cmp=C({type:e,selectors:[["app-lista-proveedores",8,"component"]],standalone:!1,attrs:li,decls:15,vars:2,consts:[[1,"page-container"],[1,"card-section"],[1,"header-actions"],["mat-raised-button","","color","primary",3,"click"],[1,"search-bar"],["type","text","placeholder","Buscar por Nombre o RUC",3,"ngModelChange","ngModel"],[1,"loading-state","centered-content"],["mode","indeterminate","diameter","50"],[3,"proveedores"],[1,"empty-state","centered-content"],[3,"editar","eliminar","proveedores"]],template:function(i,r){i&1&&(n(0,"div",0)(1,"h2"),a(2,"Gesti\xF3n de Proveedores"),o(),n(3,"mat-card",1)(4,"div",2)(5,"h3"),a(6,"Listado de Proveedores Registrados"),o(),n(7,"button",3),v("click",function(){return r.onCrearProveedor()}),a(8," Registrar Nuevo Proveedor "),o()(),n(9,"div",4)(10,"h3"),a(11,"Buscar Proveedor"),o(),n(12,"input",5),K("ngModelChange",function(m){return W(r.filtroBusqueda,m)||(r.filtroBusqueda=m),m}),o()(),I(13,si,4,0,"div",6)(14,hi,2,1),o()()),i&2&&(c(12),Q("ngModel",r.filtroBusqueda),c(),T(r.isLoading?13:14))},dependencies:[Y,ue,F,A,Z,xe,Ee],styles:[".buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:2rem}.page-container[_ngcontent-%COMP%]{padding:1.5rem;color:#1e3a8a}.card-section[_ngcontent-%COMP%]{margin-bottom:2rem;background-color:#f8f9fc}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{color:#1e3a8a;margin-bottom:1rem}"]})};var $=class e{constructor(t,i){this.http=t;this.proveedorService=i}apiUrl=`${bt.apiUrl}/api/compras`;getSolicitudesPendientes(){return this.http.get(`${this.apiUrl}/solicitudes?estado=PENDIENTE`).pipe(fe(t=>t.data))}getProductosBySolicitudId(t){return this.http.get(`${this.apiUrl}/solicitudes/${t}/detalles`).pipe(fe(i=>i.data.map(r=>({idProducto:r.idProducto.id,nombreProducto:r.idProducto.nombreProducto,cantidadSolicitada:r.cantidad,idProveedorSeleccionado:null,nombreProveedorSeleccionado:null,precioUnitarioReferencial:null,subtotal:null}))))}getProveedoresByProductoId(t){return this.http.get(`${this.apiUrl}/productos/${t}/cotizaciones`).pipe(fe(i=>i.data.map(r=>({id:r.idProveedor.id,nombreProveedor:r.idProveedor.nombreProveedor,ruc:r.idProveedor.ruc,direccion:r.idProveedor.direccion,telefono:r.idProveedor.telefono,correo:r.idProveedor.correo,estado:r.idProveedor.estado,precioReferencial:r.precioUnitario}))))}confirmarCotizacion(t,i,r){let d={idSolicitud:t,detalles:i.map(m=>({idProducto:m.idProducto,cantidad:m.cantidadSolicitada,precioUnitario:m.precioUnitarioReferencial,idProveedor:m.idProveedorSeleccionado})),observaciones:r};return this.http.post(`${this.apiUrl}/ordenes-compra`,d).pipe(fe(m=>({idOrden:m.idOrdenCompra,idSolicitud:t,proveedorPrincipal:"M\xFAltiples",fechaGeneracion:new Date().toISOString(),montoTotal:0,estadoOC:"GENERADA"})))}getOrdenesHistoricas(){return X([])}getDetalleOrdenCompra(t){return X({})}static \u0275fac=function(i){return new(i||e)(Ve(Je),Ve(te))};static \u0275prov=be({token:e,factory:e.\u0275fac,providedIn:"root"})};var ui=()=>[];function fi(e,t){e&1&&(n(0,"th",14),a(1," ID Solicitud "),o())}function vi(e,t){if(e&1&&(n(0,"td",15),a(1),o()),e&2){let i=t.$implicit;c(),p(" **",i.idSolicitud,"** ")}}function _i(e,t){e&1&&(n(0,"th",14),a(1," \xC1rea "),o())}function gi(e,t){if(e&1&&(n(0,"td",15),a(1),o()),e&2){let i=t.$implicit;c(),p(" ",i.area," ")}}function Ci(e,t){e&1&&(n(0,"th",14),a(1," Solicitante "),o())}function bi(e,t){if(e&1&&(n(0,"td",15),a(1),o()),e&2){let i=t.$implicit;c(),p(" ",i.solicitante," ")}}function yi(e,t){e&1&&(n(0,"th",14),a(1," F. Creaci\xF3n "),o())}function xi(e,t){if(e&1&&(n(0,"td",15),a(1),x(2,"date"),o()),e&2){let i=t.$implicit;c(),p(" ",ce(2,1,i.fechaCreacion,"dd/MM/yyyy")," ")}}function Pi(e,t){e&1&&(n(0,"th",14),a(1," Estado "),o())}function Si(e,t){if(e&1&&(n(0,"td",15)(1,"span"),a(2),o()()),e&2){let i=t.$implicit;c(),Ge("estado-"+i.estado.toLowerCase().replace(" ","-")),c(),S(i.estado)}}function wi(e,t){e&1&&(n(0,"th",14),a(1," Motivo "),o())}function Ei(e,t){if(e&1&&(n(0,"td",15),a(1),o()),e&2){let i=t.$implicit;c(),p(" ",i.motivo," ")}}function Mi(e,t){e&1&&(n(0,"th",14),a(1," Acci\xF3n "),o())}function Ii(e,t){if(e&1){let i=P();n(0,"td",15)(1,"button",16),v("click",function(){let d=b(i).$implicit,m=_();return y(m.onCotizar(d))}),a(2," Cotizar "),o()()}}function Ti(e,t){e&1&&h(0,"tr",17)}function Di(e,t){e&1&&h(0,"tr",18)}function Ri(e,t){e&1&&(n(0,"div",19),a(1," No hay solicitudes de compra pendientes. "),o())}var Te=class e{solicitudes=null;cotizar=new R;displayedColumns=["idSolicitud","area","solicitante","fechaCreacion","estado","motivo","accion"];onCotizar(t){this.cotizar.emit(t)}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=C({type:e,selectors:[["app-solicitudes-compra-table"]],inputs:{solicitudes:"solicitudes"},outputs:{cotizar:"cotizar"},standalone:!1,decls:26,vars:5,consts:[[1,"table-container","mat-elevation-z2"],["mat-table","",1,"full-width",3,"dataSource"],["matColumnDef","idSolicitud"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","area"],["matColumnDef","solicitante"],["matColumnDef","fechaCreacion"],["matColumnDef","estado"],["matColumnDef","motivo"],["matColumnDef","accion"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","no-data-message",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],["color","primary",3,"click"],["mat-header-row",""],["mat-row",""],[1,"no-data-message"]],template:function(i,r){i&1&&(n(0,"div",0)(1,"table",1),u(2,2),l(3,fi,2,0,"th",3)(4,vi,2,1,"td",4),f(),u(5,5),l(6,_i,2,0,"th",3)(7,gi,2,1,"td",4),f(),u(8,6),l(9,Ci,2,0,"th",3)(10,bi,2,1,"td",4),f(),u(11,7),l(12,yi,2,0,"th",3)(13,xi,3,4,"td",4),f(),u(14,8),l(15,Pi,2,0,"th",3)(16,Si,3,3,"td",4),f(),u(17,9),l(18,wi,2,0,"th",3)(19,Ei,2,1,"td",4),f(),u(20,10),l(21,Mi,2,0,"th",3)(22,Ii,3,0,"td",4),f(),l(23,Ti,1,0,"tr",11)(24,Di,1,0,"tr",12),o(),l(25,Ri,2,0,"div",13),o()),i&2&&(c(),s("dataSource",r.solicitudes||w(4,ui)),c(22),s("matHeaderRowDef",r.displayedColumns),c(),s("matRowDefColumns",r.displayedColumns),c(),s("ngIf",!(r.solicitudes!=null&&r.solicitudes.length)))},dependencies:[z,B,j,N,L,G,H,V,q,U,D,de],styles:[".table-container[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto}table[_ngcontent-%COMP%]{width:100%}th[_ngcontent-%COMP%]{background-color:#e0f0ff;color:#1e3a8a;font-weight:700}button[_ngcontent-%COMP%]{color:#1e3a8a;font-weight:500}"]})};var Oi=["class","component"],Fi=()=>["/GestionCompras/historial-compras"];function Ai(e,t){if(e&1){let i=P();n(0,"app-solicitudes-compra-table",8),v("cotizar",function(d){b(i);let m=_(2);return y(m.onVerCotizacion(d))}),o()}if(e&2){let i=_(2);s("solicitudes",i.getSolicitudesFiltradas())}}function zi(e,t){e&1&&(n(0,"div",7)(1,"h2"),a(2,"No se encontraron Solicitudes Pendientes"),o(),n(3,"p"),a(4,"Ajuste los criterios de b\xFAsqueda o verifique si existen \xF3rdenes hist\xF3ricas."),o()())}function Li(e,t){if(e&1&&I(0,Ai,1,1,"app-solicitudes-compra-table",6)(1,zi,5,0,"div",7),e&2){let i=_();T(i.getSolicitudesFiltradas()&&i.getSolicitudesFiltradas().length>0?0:1)}}var De=class e{constructor(t,i){this.comprasService=t;this.router=i}solicitudesPendientes=null;isLoading=!0;filtroBusqueda="";ngOnInit(){this.cargarSolicitudes()}cargarSolicitudes(){this.isLoading=!0,this.comprasService.getSolicitudesPendientes().subscribe({next:t=>{this.solicitudesPendientes=t,this.isLoading=!1},error:t=>{console.error("Error al cargar solicitudes:",t),this.isLoading=!1}})}onVerCotizacion(t){this.router.navigate(["/GestionCompras/cotizacion-generacion",t.id])}getSolicitudesFiltradas(){if(!this.solicitudesPendientes)return null;if(!this.filtroBusqueda)return this.solicitudesPendientes;let t=this.filtroBusqueda.toLowerCase();return this.solicitudesPendientes.filter(i=>(i.solicitante?.toLowerCase().includes(t)??!1)||(i.area?.toLowerCase().includes(t)??!1)||i.id.toString().includes(t))}static \u0275fac=function(i){return new(i||e)(g($),g(le))};static \u0275cmp=C({type:e,selectors:[["app-solicitudes-list",8,"component"]],standalone:!1,attrs:Oi,decls:14,vars:4,consts:[[1,"page-container"],[1,"card-section"],[1,"search-bar"],["type","text","placeholder","Buscar por ID, \xC1rea o Solicitante",3,"ngModelChange","ngModel"],[1,"footer-actions"],["color","default",3,"routerLink"],[3,"solicitudes"],[1,"empty-state","centered-content"],[3,"cotizar","solicitudes"]],template:function(i,r){i&1&&(n(0,"div",0)(1,"h2"),a(2,"Solicitudes de Compra Pendientes"),o(),n(3,"mat-card",1)(4,"h3"),a(5,"Lista de solicitudes listas para iniciar el proceso de cotizaci\xF3n."),o(),n(6,"div",2)(7,"h3"),a(8,"Buscar Solicitud"),o(),n(9,"input",3),K("ngModelChange",function(m){return W(r.filtroBusqueda,m)||(r.filtroBusqueda=m),m}),o()(),I(10,Li,2,1),o(),n(11,"div",4)(12,"button",5),a(13," Ver Historial General de Compras "),o()()()),i&2&&(c(9),Q("ngModel",r.filtroBusqueda),c(),T(r.isLoading?-1:10),c(2),s("routerLink",w(3,Fi)))},dependencies:[Y,se,F,A,Z,Te],styles:[".buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:2rem}.page-container[_ngcontent-%COMP%]{padding:1.5rem;color:#1e3a8a}.card-section[_ngcontent-%COMP%]{margin-bottom:2rem;background-color:#f8f9fc}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{color:#1e3a8a;margin-bottom:1rem}"]})};var Bi=()=>[];function Ni(e,t){e&1&&(n(0,"th",10),a(1," Nombre Proveedor "),o())}function Hi(e,t){if(e&1&&(n(0,"td",11),a(1),o()),e&2){let i=t.$implicit;c(),p(" **",i.nombreProveedor,"** ")}}function Vi(e,t){e&1&&(n(0,"th",10),a(1," Precio Referencial "),o())}function ji(e,t){if(e&1&&(n(0,"td",11),a(1),x(2,"currency"),o()),e&2){let i=t.$implicit;c(),p(" ",E(2,1,i.precioReferencial,"USD","symbol","1.2-2")," ")}}function Gi(e,t){e&1&&(n(0,"th",10),a(1," Acci\xF3n "),o())}function qi(e,t){if(e&1){let i=P();n(0,"td",11)(1,"button",12),v("click",function(){let d=b(i).$implicit,m=_();return y(m.onSeleccionar(d))}),a(2," Seleccionar "),o()()}}function Ui(e,t){e&1&&h(0,"tr",13)}function $i(e,t){e&1&&h(0,"tr",14)}function Qi(e,t){e&1&&(n(0,"div",15),a(1," No hay proveedores disponibles para este producto. "),o())}var Re=class e{proveedores=[];displayedColumns=["nombreProveedor","precioReferencial","accion"];seleccionar=new R;onSeleccionar(t){this.seleccionar.emit(t)}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=C({type:e,selectors:[["app-proveedores-productos-table"]],inputs:{proveedores:"proveedores"},outputs:{seleccionar:"seleccionar"},standalone:!1,decls:14,vars:5,consts:[[1,"table-container","mat-elevation-z2"],["mat-table","",1,"full-width",3,"dataSource"],["matColumnDef","nombreProveedor"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","precioReferencial"],["matColumnDef","accion"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","no-data-message",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],["color","accent",3,"click"],["mat-header-row",""],["mat-row",""],[1,"no-data-message"]],template:function(i,r){i&1&&(n(0,"div",0)(1,"table",1),u(2,2),l(3,Ni,2,0,"th",3)(4,Hi,2,1,"td",4),f(),u(5,5),l(6,Vi,2,0,"th",3)(7,ji,3,6,"td",4),f(),u(8,6),l(9,Gi,2,0,"th",3)(10,qi,3,0,"td",4),f(),l(11,Ui,1,0,"tr",7)(12,$i,1,0,"tr",8),o(),l(13,Qi,2,0,"div",9),o()),i&2&&(c(),s("dataSource",r.proveedores||w(4,Bi)),c(10),s("matHeaderRowDef",r.displayedColumns),c(),s("matRowDefColumns",r.displayedColumns),c(),s("ngIf",!(r.proveedores!=null&&r.proveedores.length)))},dependencies:[z,B,j,N,L,G,H,V,q,U,D,O],styles:[".table-container[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto}table[_ngcontent-%COMP%]{width:100%}th[_ngcontent-%COMP%]{background-color:#e0f0ff;color:#1e3a8a;font-weight:700}button[_ngcontent-%COMP%]{color:#1e3a8a;font-weight:500}"]})};var Ki=["class","component"];function Zi(e,t){e&1&&(n(0,"div",9),h(1,"mat-spinner",10),n(2,"p"),a(3,"Cargando proveedores disponibles..."),o()())}function Yi(e,t){if(e&1){let i=P();n(0,"div")(1,"app-proveedores-productos-table",11),v("seleccionar",function(d){b(i);let m=_();return y(m.onProveedorSeleccionado(d))}),o()()}if(e&2){let i=_();c(),s("proveedores",i.proveedoresDisponibles)}}var ke=class e{constructor(t,i,r){this.dialogRef=t;this.data=i;this.comprasService=r;this.productoId=i.producto.idProducto,this.productoNombre=i.producto.nombreProducto}productoId;productoNombre;proveedoresDisponibles=[];isLoading=!0;ngOnInit(){this.comprasService.getProveedoresByProductoId(this.productoId).subscribe({next:t=>{this.proveedoresDisponibles=t,this.isLoading=!1},error:t=>{console.error("Error al cargar proveedores:",t),this.isLoading=!1}})}onProveedorSeleccionado(t){let i={proveedorSeleccionado:t};this.dialogRef.close(i)}onCancel(){this.dialogRef.close()}static \u0275fac=function(i){return new(i||e)(g(pe),g(he),g($))};static \u0275cmp=C({type:e,selectors:[["app-popup-proveedor-producto",8,"component"]],standalone:!1,attrs:Ki,decls:11,vars:4,consts:[["color","primary"],[1,"dialog-title"],[1,"spacer"],["mat-icon-button","",3,"click"],["mat-dialog-content","",1,"dialog-content"],["class","loading-spinner",4,"ngIf"],[4,"ngIf"],["mat-dialog-actions","","align","end"],["mat-button","","color","warn",3,"click"],[1,"loading-spinner"],["diameter","30"],[3,"seleccionar","proveedores"]],template:function(i,r){i&1&&(n(0,"mat-toolbar",0)(1,"span",1),a(2),o(),h(3,"span",2),n(4,"button",3),v("click",function(){return r.onCancel()}),o()(),n(5,"div",4),l(6,Zi,4,0,"div",5)(7,Yi,2,1,"div",6),o(),n(8,"div",7)(9,"button",8),v("click",function(){return r.onCancel()}),a(10,"Cancelar"),o()()),i&2&&(c(2),re(" Seleccionar Proveedor: Producto **",r.productoId," - ",r.productoNombre,"** "),c(4),s("ngIf",r.isLoading),c(),s("ngIf",!r.isLoading))},dependencies:[me,ue,D,xe,et,Re],encapsulation:2})};var Ji=()=>[];function Xi(e,t){e&1&&(n(0,"th",13),a(1," Producto "),o())}function eo(e,t){if(e&1&&(n(0,"td",14),a(1),o()),e&2){let i=t.$implicit;c(),re(" **",i.idProducto," - ",i.nombreProducto,"** ")}}function to(e,t){e&1&&(n(0,"th",13),a(1," Cant. Solicitada "),o())}function io(e,t){if(e&1&&(n(0,"td",14),a(1),o()),e&2){let i=t.$implicit;c(),p(" ",i.cantidadSolicitada," ")}}function oo(e,t){e&1&&(n(0,"th",13),a(1," Proveedor "),o())}function no(e,t){if(e&1&&(n(0,"td",14),a(1),o()),e&2){let i=t.$implicit;c(),p(" ",i.nombreProveedorSeleccionado||"Pendiente"," ")}}function ao(e,t){e&1&&(n(0,"th",13),a(1," Precio Unitario "),o())}function ro(e,t){if(e&1){let i=P();n(0,"td",14)(1,"input",15),K("ngModelChange",function(d){let m=b(i).$implicit;return W(m.precioUnitarioReferencial,d)||(m.precioUnitarioReferencial=d),y(d)}),v("change",function(){let d=b(i).$implicit,m=_();return y(m.onPrecioChange(d))}),o(),n(2,"span",16),a(3,"$"),o()()}if(e&2){let i=t.$implicit;c(),Q("ngModel",i.precioUnitarioReferencial)}}function co(e,t){e&1&&(n(0,"th",13),a(1," Subtotal "),o())}function lo(e,t){if(e&1&&(n(0,"td",14),a(1),x(2,"currency"),o()),e&2){let i=t.$implicit;c(),p(" ",i.subtotal==null?"-":E(2,1,i.subtotal,"USD","symbol","1.2-2")," ")}}function so(e,t){e&1&&(n(0,"th",13),a(1," Acci\xF3n "),o())}function mo(e,t){if(e&1){let i=P();n(0,"td",14)(1,"button",17),v("click",function(){let d=b(i).$implicit,m=_();return y(m.onSeleccionarProveedor(d))}),a(2," Seleccionar Proveedor "),o()()}}function po(e,t){e&1&&h(0,"tr",18)}function ho(e,t){e&1&&h(0,"tr",19)}function uo(e,t){e&1&&(n(0,"div",20),a(1," No hay productos para cotizar. "),o())}var Oe=class e{productos=[];seleccionarProveedor=new R;productoActualizado=new R;displayedColumns=["idProducto","cantidadSolicitada","proveedor","precioReferencial","accion","subtotal"];onPrecioChange(t){let i=t.precioUnitarioReferencial||0;t.subtotal=t.cantidadSolicitada*i,this.productoActualizado.emit(t)}onSeleccionarProveedor(t){this.seleccionarProveedor.emit(t)}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=C({type:e,selectors:[["app-cotizacion-productos-table"]],inputs:{productos:"productos"},outputs:{seleccionarProveedor:"seleccionarProveedor",productoActualizado:"productoActualizado"},standalone:!1,decls:23,vars:5,consts:[[1,"table-container","mat-elevation-z2"],["mat-table","",1,"full-width",3,"dataSource"],["matColumnDef","idProducto"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","cantidadSolicitada"],["matColumnDef","proveedor"],["matColumnDef","precioReferencial"],["matColumnDef","subtotal"],["matColumnDef","accion"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","no-data-message",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],["matInput","","type","number","min","0","placeholder","-",3,"ngModelChange","change","ngModel"],["matPrefix",""],["color","accent",3,"click"],["mat-header-row",""],["mat-row",""],[1,"no-data-message"]],template:function(i,r){i&1&&(n(0,"div",0)(1,"table",1),u(2,2),l(3,Xi,2,0,"th",3)(4,eo,2,2,"td",4),f(),u(5,5),l(6,to,2,0,"th",3)(7,io,2,1,"td",4),f(),u(8,6),l(9,oo,2,0,"th",3)(10,no,2,1,"td",4),f(),u(11,7),l(12,ao,2,0,"th",3)(13,ro,4,1,"td",4),f(),u(14,8),l(15,co,2,0,"th",3)(16,lo,3,6,"td",4),f(),u(17,9),l(18,so,2,0,"th",3)(19,mo,3,0,"td",4),f(),l(20,po,1,0,"tr",10)(21,ho,1,0,"tr",11),o(),l(22,uo,2,0,"div",12),o()),i&2&&(c(),s("dataSource",r.productos||w(4,Ji)),c(19),s("matHeaderRowDef",r.displayedColumns),c(),s("matRowDefColumns",r.displayedColumns),c(),s("ngIf",!(r.productos!=null&&r.productos.length)))},dependencies:[xt,z,B,j,N,L,G,H,V,q,U,D,F,ct,A,st,Z,O],styles:[".table-container[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto}table[_ngcontent-%COMP%]{width:100%}th[_ngcontent-%COMP%]{background-color:#e0f0ff;color:#1e3a8a;font-weight:700}button[_ngcontent-%COMP%]{color:#1e3a8a;font-weight:500}"]})};var vo=["class","component"],_o=.18,Fe=class e{constructor(t,i,r,d){this.route=t;this.comprasService=i;this.dialog=r;this.router=d}idSolicitud=0;productosACotizar=null;isLoading=!0;isConfirming=!1;justificacionUsuario="";get subtotalGeneral(){return this.productosACotizar?this.productosACotizar.reduce((t,i)=>t+(i.subtotal||0),0):0}get igv(){return this.subtotalGeneral*_o}get costoTotal(){return this.subtotalGeneral+this.igv}get puedeConfirmarCompra(){return!this.productosACotizar||this.productosACotizar.length===0?!1:this.productosACotizar.every(i=>i.idProveedorSeleccionado!==null&&i.precioUnitarioReferencial!==null&&i.precioUnitarioReferencial>0)&&this.justificacionUsuario.trim().length>10}ngOnInit(){this.route.paramMap.subscribe(t=>{let i=t.get("idSolicitud");i?(this.idSolicitud=+i,this.cargarProductosCotizacion(this.idSolicitud)):this.isLoading=!1})}cargarProductosCotizacion(t){this.isLoading=!0,this.comprasService.getProductosBySolicitudId(t).subscribe({next:i=>{this.productosACotizar=i.map(r=>Ke(oe({},r),{subtotal:(r.precioUnitarioReferencial||0)*r.cantidadSolicitada})),this.isLoading=!1},error:i=>{console.error("Error al cargar productos de cotizaci\xF3n:",i),this.isLoading=!1}})}onAbrirSelectorProveedor(t){this.dialog.open(ke,{width:"800px",data:{producto:t}}).afterClosed().subscribe(r=>{r&&r.proveedorSeleccionado&&this.actualizarProducto(t,r.proveedorSeleccionado)})}actualizarProducto(t,i){if(!this.productosACotizar)return;let r=this.productosACotizar.findIndex(d=>d.idProducto===t.idProducto);if(r!==-1){let d=oe({},this.productosACotizar[r]);d.idProveedorSeleccionado=i.id,d.nombreProveedorSeleccionado=i.nombreProveedor,d.precioUnitarioReferencial=i.precioReferencial,d.subtotal=t.cantidadSolicitada*i.precioReferencial,this.productosACotizar[r]=d,this.productosACotizar=[...this.productosACotizar]}}onProductoActualizado(t){this.productosACotizar=[...this.productosACotizar||[]]}onVerHistorial(){alert(`Ver Historial de la Solicitud #${this.idSolicitud}`)}onConfirmarCompra(){if(!this.puedeConfirmarCompra){alert("Debe seleccionar proveedor y precio para todos los productos y proporcionar una justificaci\xF3n.");return}this.isConfirming=!0,this.comprasService.confirmarCotizacion(this.idSolicitud,this.productosACotizar,this.justificacionUsuario).pipe(ie(()=>this.isConfirming=!1)).subscribe({next:t=>{console.log("Cotizaci\xF3n Confirmada. OC Generada:",t.idOrden),this.router.navigate(["/GestionCompras/orden-compra-resumen",t.idOrden])},error:t=>{console.error("Error al generar la Orden de Compra:",t),alert("Error: No se pudo generar la Orden de Compra. Int\xE9ntelo de nuevo.")}})}static \u0275fac=function(i){return new(i||e)(g(ye),g($),g(Pe),g(le))};static \u0275cmp=C({type:e,selectors:[["app-cotizacion-generacion",8,"component"]],standalone:!1,attrs:vo,decls:55,vars:23,consts:[[1,"page-container"],[1,"card-section","request-details"],[1,"detail-grid"],[1,"card-section"],[3,"seleccionarProveedor","productoActualizado","productos"],[1,"footer-summary"],[1,"justification-card"],["rows","5","placeholder","Explique el porqu\xE9 de la selecci\xF3n de proveedores y precios.",3,"ngModelChange","ngModel"],[1,"totals-card"],[1,"total-row"],[1,"value"],[1,"total-row","total-final"],["color","accent",1,"confirm-button",3,"click","disabled"]],template:function(i,r){i&1&&(n(0,"div",0)(1,"h2"),a(2),o(),n(3,"mat-card",1)(4,"h3"),a(5,"Detalles de la Solicitud"),o(),n(6,"div",2)(7,"p")(8,"strong"),a(9,"\xC1rea Solicitante:"),o(),a(10," [Nombre del \xC1rea]"),o(),n(11,"p")(12,"strong"),a(13,"Solicitante:"),o(),a(14," [Nombre del Solicitante]"),o(),n(15,"p")(16,"strong"),a(17,"Fecha de Creaci\xF3n:"),o(),a(18," [DD/MM/YYYY]"),o(),n(19,"p")(20,"strong"),a(21,"Motivo:"),o(),a(22," [Breve descripci\xF3n del motivo de la solicitud]"),o()()(),n(23,"mat-card",3)(24,"h3"),a(25,"Productos a Cotizar"),o(),n(26,"app-cotizacion-productos-table",4),v("seleccionarProveedor",function(m){return r.onAbrirSelectorProveedor(m)})("productoActualizado",function(m){return r.onProductoActualizado(m)}),o()(),n(27,"div",5)(28,"mat-card",6)(29,"h3"),a(30,"Justificaci\xF3n de la Decisi\xF3n"),o(),n(31,"textarea",7),K("ngModelChange",function(m){return W(r.justificacionUsuario,m)||(r.justificacionUsuario=m),m}),o()(),n(32,"mat-card",8)(33,"h3"),a(34,"Resumen Econ\xF3mico"),o(),n(35,"div",9)(36,"span"),a(37,"Subtotal:"),o(),n(38,"span",10),a(39),x(40,"currency"),o()(),n(41,"div",9)(42,"span"),a(43),o(),n(44,"span",10),a(45),x(46,"currency"),o()(),n(47,"div",11)(48,"strong"),a(49,"Costo Total:"),o(),n(50,"strong",10),a(51),x(52,"currency"),o()(),n(53,"button",12),v("click",function(){return r.onConfirmarCompra()}),a(54," Confirmar Compra "),o()()()()),i&2&&(c(2),p("Cotizaci\xF3n de Solicitud N\xB0 ",r.idSolicitud),c(24),s("productos",r.productosACotizar),c(5),Q("ngModel",r.justificacionUsuario),c(8),S(E(40,8,r.subtotalGeneral,"USD","symbol","1.2-2")),c(4),p("IGV (",.18*100,"%):"),c(2),S(E(46,13,r.igv,"USD","symbol","1.2-2")),c(6),S(E(52,18,r.costoTotal,"USD","symbol","1.2-2")),c(2),s("disabled",!r.puedeConfirmarCompra))},dependencies:[Y,F,A,Z,Oe,O],styles:[".buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:2rem}.page-container[_ngcontent-%COMP%]{padding:1.5rem;color:#1e3a8a}.card-section[_ngcontent-%COMP%]{margin-bottom:2rem;background-color:#f8f9fc}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{color:#1e3a8a;margin-bottom:1rem}"]})};var go=()=>[];function Co(e,t){e&1&&(n(0,"th",13),a(1," OC N\xB0 "),o())}function bo(e,t){if(e&1&&(n(0,"td",14),a(1),o()),e&2){let i=t.$implicit;c(),p(" **",i.idOrden,"** ")}}function yo(e,t){e&1&&(n(0,"th",13),a(1," Solicitud N\xB0 "),o())}function xo(e,t){if(e&1&&(n(0,"td",14),a(1),o()),e&2){let i=t.$implicit;c(),p(" ",i.idSolicitud," ")}}function Po(e,t){e&1&&(n(0,"th",13),a(1," Proveedor Principal "),o())}function So(e,t){if(e&1&&(n(0,"td",14),a(1),o()),e&2){let i=t.$implicit;c(),p(" ",i.proveedorPrincipal," ")}}function wo(e,t){e&1&&(n(0,"th",13),a(1," Fecha "),o())}function Eo(e,t){if(e&1&&(n(0,"td",14),a(1),x(2,"date"),o()),e&2){let i=t.$implicit;c(),p(" ",ce(2,1,i.fechaGeneracion,"dd/MM/yyyy")," ")}}function Mo(e,t){e&1&&(n(0,"th",13),a(1," Monto Total "),o())}function Io(e,t){if(e&1&&(n(0,"td",14),a(1),x(2,"currency"),o()),e&2){let i=t.$implicit;c(),p(" ",E(2,1,i.montoTotal,"USD","symbol","1.2-2")," ")}}function To(e,t){e&1&&(n(0,"th",13),a(1," Estado "),o())}function Do(e,t){if(e&1&&(n(0,"td",14),a(1),o()),e&2){let i=t.$implicit;c(),p(" ",i.estadoOC," ")}}function Ro(e,t){e&1&&(n(0,"th",13),a(1," Acci\xF3n "),o())}function ko(e,t){if(e&1){let i=P();n(0,"td",14)(1,"button",15),v("click",function(){let d=b(i).$implicit,m=_();return y(m.onVerDetalle(d.idOrden))}),a(2," Ver Detalle "),o()()}}function Oo(e,t){e&1&&h(0,"tr",16)}function Fo(e,t){e&1&&h(0,"tr",17)}var Ae=class e{ordenes=[];displayedColumns=["idOrden","idSolicitud","proveedorPrincipal","fechaGeneracion","montoTotal","estadoOC","accion"];verDetalle=new R;onVerDetalle(t){this.verDetalle.emit(t)}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=C({type:e,selectors:[["app-ordenes-compra-table"]],inputs:{ordenes:"ordenes"},outputs:{verDetalle:"verDetalle"},standalone:!1,decls:25,vars:4,consts:[[1,"table-container","mat-elevation-z2"],["mat-table","",1,"full-width",3,"dataSource"],["matColumnDef","idOrden"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","idSolicitud"],["matColumnDef","proveedorPrincipal"],["matColumnDef","fechaGeneracion"],["matColumnDef","montoTotal"],["matColumnDef","estadoOC"],["matColumnDef","accion"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["color","primary",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(i,r){i&1&&(n(0,"div",0)(1,"table",1),u(2,2),l(3,Co,2,0,"th",3)(4,bo,2,1,"td",4),f(),u(5,5),l(6,yo,2,0,"th",3)(7,xo,2,1,"td",4),f(),u(8,6),l(9,Po,2,0,"th",3)(10,So,2,1,"td",4),f(),u(11,7),l(12,wo,2,0,"th",3)(13,Eo,3,4,"td",4),f(),u(14,8),l(15,Mo,2,0,"th",3)(16,Io,3,6,"td",4),f(),u(17,9),l(18,To,2,0,"th",3)(19,Do,2,1,"td",4),f(),u(20,10),l(21,Ro,2,0,"th",3)(22,ko,3,0,"td",4),f(),l(23,Oo,1,0,"tr",11)(24,Fo,1,0,"tr",12),o()()),i&2&&(c(),s("dataSource",r.ordenes||w(3,go)),c(22),s("matHeaderRowDef",r.displayedColumns),c(),s("matRowDefColumns",r.displayedColumns))},dependencies:[z,B,j,N,L,G,H,V,q,U,O,de],styles:[".table-container[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto}table[_ngcontent-%COMP%]{width:100%}th[_ngcontent-%COMP%]{background-color:#e0f0ff;color:#1e3a8a;font-weight:700}button[_ngcontent-%COMP%]{color:#1e3a8a;font-weight:500}"]})};var zo=["class","component"],Lo=()=>["/GestionCompras/solicitudes-pendientes"];function Bo(e,t){e&1&&(n(0,"div",4),h(1,"mat-progress-spinner",7),n(2,"p"),a(3,"Cargando historial de \xF3rdenes..."),o()())}function No(e,t){if(e&1){let i=P();n(0,"app-ordenes-compra-table",10),v("verDetalle",function(d){b(i);let m=_(2);return y(m.onVerDetalle(d))}),o()}if(e&2){let i=_(2);s("ordenes",i.getOrdenesFiltradas())}}function Ho(e,t){e&1&&(n(0,"div",9)(1,"h2"),a(2,"No se encontraron \xD3rdenes de Compra"),o(),n(3,"p"),a(4,"Ajuste los criterios de b\xFAsqueda o verifique si existen \xF3rdenes hist\xF3ricas."),o()())}function Vo(e,t){if(e&1&&I(0,No,1,1,"app-ordenes-compra-table",8)(1,Ho,5,0,"div",9),e&2){let i=_();T(i.getOrdenesFiltradas()&&i.getOrdenesFiltradas().length>0?0:1)}}var ze=class e{constructor(t,i){this.comprasService=t;this.router=i}ordenesHistoricas=null;isLoading=!0;filtroBusqueda="";ngOnInit(){this.cargarOrdenes()}cargarOrdenes(){this.isLoading=!0,this.comprasService.getOrdenesHistoricas().subscribe({next:t=>{this.ordenesHistoricas=t,this.isLoading=!1},error:t=>{console.error("Error al cargar historial de \xF3rdenes:",t),this.isLoading=!1}})}getOrdenesFiltradas(){if(!this.ordenesHistoricas)return null;if(!this.filtroBusqueda)return this.ordenesHistoricas;let t=this.filtroBusqueda.toLowerCase();return this.ordenesHistoricas.filter(i=>i.idOrden.toString().includes(t)||(typeof i.idSolicitud=="object"?i.idSolicitud.id.toString():i.idSolicitud.toString()).includes(t)||i.proveedorPrincipal.toLowerCase().includes(t)||i.estadoOC.toLowerCase().includes(t))}onVerDetalle(t){this.router.navigate(["/GestionCompras/orden-compra-resumen",t])}static \u0275fac=function(i){return new(i||e)(g($),g(le))};static \u0275cmp=C({type:e,selectors:[["app-historial-compras",8,"component"]],standalone:!1,attrs:zo,decls:16,vars:4,consts:[[1,"page-container"],[1,"card-section"],[1,"search-bar"],["type","text","placeholder","Buscar por OC N\xB0, Solicitud N\xB0, Proveedor o Estado",3,"ngModelChange","ngModel"],[1,"loading-state","centered-content"],[1,"footer-actions"],["color","primary",3,"routerLink"],["mode","indeterminate","diameter","50"],[3,"ordenes"],[1,"empty-state","centered-content"],[3,"verDetalle","ordenes"]],template:function(i,r){i&1&&(n(0,"div",0)(1,"h2"),a(2,"Historial General de \xD3rdenes de Compra"),o(),n(3,"mat-card",1)(4,"h3"),a(5,"\xD3rdenes finalizadas, recibidas o canceladas."),o(),n(6,"div",2)(7,"h3"),a(8,"Buscar Orden de Compra"),o(),n(9,"input",3),K("ngModelChange",function(m){return W(r.filtroBusqueda,m)||(r.filtroBusqueda=m),m}),o()()(),n(10,"mat-card",1),I(11,Bo,4,0,"div",4)(12,Vo,2,1),o(),n(13,"div",5)(14,"button",6),a(15," Volver a Solicitudes Pendientes "),o()()()),i&2&&(c(9),Q("ngModel",r.filtroBusqueda),c(2),T(r.isLoading?11:12),c(3),s("routerLink",w(3,Lo)))},dependencies:[Y,ue,se,F,A,Z,Ae],styles:[".buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:2rem}.page-container[_ngcontent-%COMP%]{padding:1.5rem;color:#1e3a8a}.card-section[_ngcontent-%COMP%]{margin-bottom:2rem;background-color:#f8f9fc}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{color:#1e3a8a;margin-bottom:1rem}"]})};var jo=()=>[];function Go(e,t){e&1&&(n(0,"th",14),a(1," Producto "),o())}function qo(e,t){if(e&1&&(n(0,"td",15),a(1),o()),e&2){let i=t.$implicit;c(),re(" **",i.idProducto," - ",i.nombreProducto,"** ")}}function Uo(e,t){e&1&&h(0,"td",16)}function $o(e,t){e&1&&(n(0,"th",14),a(1," Cantidad "),o())}function Qo(e,t){if(e&1&&(n(0,"td",15),a(1),o()),e&2){let i=t.$implicit;c(),p(" ",i.cantidadComprada," ")}}function Wo(e,t){e&1&&h(0,"td",16)}function Ko(e,t){e&1&&(n(0,"th",14),a(1," Proveedor "),o())}function Zo(e,t){if(e&1&&(n(0,"td",15),a(1),o()),e&2){let i=t.$implicit;c(),p(" ",i.nombreProveedorFinal," ")}}function Yo(e,t){e&1&&h(0,"td",16)}function Jo(e,t){e&1&&(n(0,"th",14),a(1," Precio Unitario "),o())}function Xo(e,t){if(e&1&&(n(0,"td",15),a(1),x(2,"currency"),o()),e&2){let i=t.$implicit;c(),p(" ",E(2,1,i.precioUnitarioFinal,"USD","symbol","1.2-2")," ")}}function en(e,t){e&1&&(n(0,"td",16)(1,"strong"),a(2,"TOTAL (Subtotal Productos)"),o()())}function tn(e,t){e&1&&(n(0,"th",14),a(1," Subtotal "),o())}function on(e,t){if(e&1&&(n(0,"td",15),a(1),x(2,"currency"),o()),e&2){let i=t.$implicit;c(),p(" ",E(2,1,i.subtotal,"USD","symbol","1.2-2")," ")}}function nn(e,t){if(e&1&&(n(0,"td",16)(1,"strong"),a(2),x(3,"currency"),o()()),e&2){let i=_();c(2),S(E(3,1,i.getTotalCompra(),"USD","symbol","1.2-2"))}}function an(e,t){e&1&&h(0,"tr",17)}function rn(e,t){e&1&&h(0,"tr",18)}function cn(e,t){e&1&&h(0,"tr",19)}function dn(e,t){e&1&&(n(0,"div",20),a(1," No hay productos en este resumen de compra. "),o())}var Le=class e{resumen=[];displayedColumns=["idProducto","cantidadComprada","proveedor","precioUnitario","subtotal"];footerColumns=["totalLabel","totalValue"];getTotalCompra(){return this.resumen?this.resumen.reduce((t,i)=>t+(i.subtotal||0),0):0}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=C({type:e,selectors:[["app-resumen-compra-table"]],inputs:{resumen:"resumen"},standalone:!1,decls:26,vars:6,consts:[[1,"table-container","mat-elevation-z2"],["mat-table","",1,"full-width",3,"dataSource"],["matColumnDef","idProducto"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-footer-cell","",4,"matFooterCellDef"],["matColumnDef","cantidadComprada"],["matColumnDef","proveedor"],["matColumnDef","precioUnitario"],["matColumnDef","subtotal"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",4,"matFooterRowDef"],["class","no-data-message",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],["mat-footer-cell",""],["mat-header-row",""],["mat-row",""],["mat-footer-row",""],[1,"no-data-message"]],template:function(i,r){i&1&&(n(0,"div",0)(1,"table",1),u(2,2),l(3,Go,2,0,"th",3)(4,qo,2,2,"td",4)(5,Uo,1,0,"td",5),f(),u(6,6),l(7,$o,2,0,"th",3)(8,Qo,2,1,"td",4)(9,Wo,1,0,"td",5),f(),u(10,7),l(11,Ko,2,0,"th",3)(12,Zo,2,1,"td",4)(13,Yo,1,0,"td",5),f(),u(14,8),l(15,Jo,2,0,"th",3)(16,Xo,3,6,"td",4)(17,en,3,0,"td",5),f(),u(18,9),l(19,tn,2,0,"th",3)(20,on,3,6,"td",4)(21,nn,4,6,"td",5),f(),l(22,an,1,0,"tr",10)(23,rn,1,0,"tr",11)(24,cn,1,0,"tr",12),o(),l(25,dn,2,0,"div",13),o()),i&2&&(c(),s("dataSource",r.resumen||w(5,jo)),c(21),s("matHeaderRowDef",r.displayedColumns),c(),s("matRowDefColumns",r.displayedColumns),c(),s("matFooterRowDef",r.displayedColumns),c(),s("ngIf",!(r.resumen!=null&&r.resumen.length)))},dependencies:[z,B,j,N,L,G,ft,_t,H,V,vt,q,U,gt,D,O],styles:[".table-container[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto}table[_ngcontent-%COMP%]{width:100%}th[_ngcontent-%COMP%]{background-color:#e0f0ff;color:#1e3a8a;font-weight:700}button[_ngcontent-%COMP%]{color:#1e3a8a;font-weight:500}"]})};var sn=["class","component"],mn=()=>["/GestionCompras/solicitudes-pendientes"];function pn(e,t){if(e&1&&a(0),e&2){let i=_();p(" ",i.idOrden," ")}}function hn(e,t){if(e&1&&(n(0,"h3"),a(1,"Detalles de la Orden"),o(),n(2,"div",15)(3,"p")(4,"strong"),a(5,"N\xB0 de Orden:"),o(),a(6),o(),n(7,"p")(8,"strong"),a(9,"N\xB0 de Solicitud Origen:"),o(),a(10),o(),n(11,"p")(12,"strong"),a(13,"Proveedor Principal:"),o(),a(14),o(),n(15,"p")(16,"strong"),a(17,"Fecha Generaci\xF3n:"),o(),a(18),x(19,"date"),o(),n(20,"p")(21,"strong"),a(22,"Estado:"),o(),a(23),o()()),e&2){let i=_();c(6),p(" ",i.detalleOrden.idOrden),c(4),p(" ",i.detalleOrden.idSolicitud),c(4),p(" ",i.detalleOrden.proveedorPrincipal),c(4),p(" ",ce(19,5,i.detalleOrden.fechaGeneracion,"dd/MM/yyyy")),c(5),p(" ",i.detalleOrden.estadoOC)}}function un(e,t){if(e&1&&h(0,"app-resumen-compra-table",6),e&2){let i=_();s("resumen",i.productosResumen)}}function fn(e,t){e&1&&(n(0,"div",7)(1,"h2"),a(2,"No hay Productos"),o(),n(3,"p"),a(4,"La orden no contiene productos detallados."),o()())}var vn=.18,Be=class e{constructor(t,i){this.route=t;this.comprasService=i}idOrden=0;detalleOrden=null;productosResumen=null;justificacionCompra="";isLoading=!0;get subtotalGeneral(){return this.productosResumen?this.productosResumen.reduce((t,i)=>t+(i.subtotal||0),0):0}get igv(){return this.subtotalGeneral*vn}get costoTotal(){return this.subtotalGeneral+this.igv}ngOnInit(){this.route.paramMap.subscribe(t=>{let i=t.get("idOrden");i?(this.idOrden=+i,this.cargarResumenOrden(this.idOrden)):(console.error("ID de Orden de Compra no encontrado en la URL."),this.isLoading=!1)})}cargarResumenOrden(t){this.isLoading=!0,this.comprasService.getDetalleOrdenCompra(t).subscribe({next:i=>{this.detalleOrden=i.resumen,this.productosResumen=i.productos,this.justificacionCompra=i.justificacion,this.isLoading=!1},error:i=>{console.error("Error al cargar resumen de orden:",i),this.isLoading=!1}})}onImprimirOrden(){alert(`Generando PDF o imprimiendo la Orden de Compra N\xB0 ${this.idOrden}.`)}static \u0275fac=function(i){return new(i||e)(g(ye),g($))};static \u0275cmp=C({type:e,selectors:[["app-orden-compra-resumen",8,"component"]],standalone:!1,attrs:sn,decls:43,vars:25,consts:[[1,"page-container"],[1,"card-section","order-header"],[1,"header-actions"],["color","primary",3,"click"],["color","default",3,"routerLink"],[1,"card-section","products-table"],[3,"resumen"],[1,"empty-state","centered-content"],[1,"footer-summary"],[1,"justification-card"],[1,"justification-text"],[1,"totals-card"],[1,"total-row"],[1,"value"],[1,"total-row","total-final"],[1,"detail-grid"]],template:function(i,r){i&1&&(n(0,"div",0)(1,"h2"),a(2,"Resumen de Orden de Compra N\xB0 "),I(3,pn,1,1),o(),n(4,"mat-card",1),I(5,hn,24,8),n(6,"div",2)(7,"button",3),v("click",function(){return r.onImprimirOrden()}),a(8," Imprimir / Descargar "),o(),n(9,"button",4),a(10," Volver al Inicio "),o()()(),n(11,"mat-card",5)(12,"h3"),a(13,"Productos de la Orden"),o(),I(14,un,1,1,"app-resumen-compra-table",6)(15,fn,5,0,"div",7),o(),n(16,"div",8)(17,"mat-card",9)(18,"h3"),a(19,"Justificaci\xF3n de la Compra"),o(),n(20,"p",10),a(21),o()(),n(22,"mat-card",11)(23,"h3"),a(24,"Resumen de Costos"),o(),n(25,"div",12)(26,"span"),a(27,"Subtotal:"),o(),n(28,"span",13),a(29),x(30,"currency"),o()(),n(31,"div",12)(32,"span"),a(33),o(),n(34,"span",13),a(35),x(36,"currency"),o()(),n(37,"div",14)(38,"strong"),a(39,"Costo Total:"),o(),n(40,"strong",13),a(41),x(42,"currency"),o()()()()()),i&2&&(c(3),T(r.detalleOrden?3:-1),c(2),T(r.detalleOrden?5:-1),c(4),s("routerLink",w(24,mn)),c(5),T(r.productosResumen&&r.productosResumen.length>0?14:15),c(7),S(r.justificacionCompra||"No se proporcion\xF3 una justificaci\xF3n para esta orden."),c(8),S(E(30,9,r.subtotalGeneral,"USD","symbol","1.2-2")),c(4),p("IGV (",.18*100,"%):"),c(2),S(E(36,14,r.igv,"USD","symbol","1.2-2")),c(6),S(E(42,19,r.costoTotal,"USD","symbol","1.2-2")))},dependencies:[Y,se,Le,O,de],encapsulation:2})};var _n=[{path:"",redirectTo:"solicitudes-pendientes",pathMatch:"full"},{path:"solicitudes-pendientes",component:De},{path:"cotizacion-generacion/:idSolicitud",component:Fe},{path:"historial-compras",component:ze},{path:"orden-compra-resumen/:idOrden",component:Be},{path:"lista-proveedores",component:Me}],Ne=class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=ae({type:e});static \u0275inj=ne({imports:[qe.forChild(_n),qe]})};var Cn=new Ze("mat-chips-default-options",{providedIn:"root",factory:()=>({separatorKeyCodes:[13]})});var Rt=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=ae({type:e});static \u0275inj=ne({providers:[Pt,{provide:Cn,useValue:{separatorKeyCodes:[13]}}],imports:[Ue,tt,Ue]})}return e})();var kt=class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=ae({type:e});static \u0275inj=ne({imports:[Xe,Mt,$e,It,St,Ct,Rt,Ye,Ne,ht,ut,it,$e,ot,nt,wt]})};export{kt as ComprasModule};
