import{a as Qe}from"./chunk-WHEDJOOD.js";import{a as De,c as ge,d as Y}from"./chunk-IAWJUBHW.js";import"./chunk-VN3CQEPZ.js";import"./chunk-GMITE7GY.js";import{p as Ze}from"./chunk-JXCPYOSY.js";import{$ as b,$b as P,B as qe,Bc as J,Cc as Je,Dc as M,E as g,Ec as w,F as S,Fc as R,Ha as a,Hc as E,Ic as y,Ja as s,Kc as O,La as le,Lc as q,Ma as me,Na as de,Nc as I,Oc as A,Qc as k,R as r,S as D,Sc as N,Tc as Q,Uc as Ke,Xc as Xe,Y as H,Zb as Le,_c as be,a as Ne,aa as fe,ac as Ue,b as Fe,bc as T,bd as K,cc as Ce,cd as he,db as j,dc as G,dd as X,e as Ee,ea as m,f as ye,fc as je,fd as Ye,h as U,hb as v,j as se,jc as ze,kb as Be,ma as _,mb as Ve,na as n,nc as We,oa as o,ob as He,pa as h,qa as c,qb as Ie,qc as Ge,ra as p,t as Oe,ta as x,va as f,w as ue,wa as C,y as $e,z as _e}from"./chunk-26SCTFAY.js";function nt(e,t){e&1&&(n(0,"th",22),a(1," Revisar "),o())}function ot(e,t){if(e&1){let i=x();n(0,"td",23)(1,"button",20),f("click",function(){let d=g(i).$implicit,u=C();return S(u.revisarStock.emit(d))}),a(2,"Revisar stock"),o()()}}function at(e,t){e&1&&(n(0,"th",22),a(1," ID Producto "),o())}function rt(e,t){if(e&1&&(n(0,"td",23),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.id_producto," ")}}function lt(e,t){e&1&&(n(0,"th",22),a(1," Nombre "),o())}function mt(e,t){if(e&1&&(n(0,"td",23),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.nombre_producto," ")}}function dt(e,t){e&1&&(n(0,"th",22),a(1," Descripci\xF3n "),o())}function ct(e,t){if(e&1&&(n(0,"td",23),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.descripcion_producto," ")}}function pt(e,t){e&1&&(n(0,"th",22),a(1," Cant. Solicitada "),o())}function st(e,t){if(e&1&&(n(0,"td",23),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.cantidadsolicitada," ")}}function ut(e,t){e&1&&(n(0,"th",22),a(1," C\xF3digo DIGEMID "),o())}function _t(e,t){if(e&1&&(n(0,"td",23),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.codigo_digemid," ")}}function ft(e,t){e&1&&(n(0,"th",22),a(1," Registro Sanitario "),o())}function Ct(e,t){if(e&1&&(n(0,"td",23),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.registro_sanitario," ")}}function bt(e,t){e&1&&(n(0,"th",22),a(1," Tipo "),o())}function ht(e,t){if(e&1&&(n(0,"td",23),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.id_tipo," ")}}function Dt(e,t){e&1&&(n(0,"th",22),a(1," Forma "),o())}function gt(e,t){if(e&1&&(n(0,"td",23),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.id_forma," ")}}function St(e,t){e&1&&(n(0,"th",22),a(1," Estado "),o())}function xt(e,t){if(e&1&&(n(0,"td",23),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.estado," ")}}function vt(e,t){e&1&&(n(0,"th",22),a(1," Decision "),o())}function Pt(e,t){if(e&1){let i=x();n(0,"td",23)(1,"mat-form-field",24)(2,"mat-select",25),de("ngModelChange",function(d){let u=g(i).$implicit;return me(u.decision,d)||(u.decision=d),S(d)}),f("selectionChange",function(){g(i);let d=C();return S(d.onDecisionChange())}),n(3,"mat-option",26),a(4,"COMPRAS"),o(),n(5,"mat-option",27),a(6,"DISTRIBUCION"),o()()()()}if(e&2){let i=t.$implicit;r(2),le("ngModel",i.decision)}}function Tt(e,t){e&1&&h(0,"tr",28)}function Mt(e,t){e&1&&h(0,"tr",29)}var Se=class e{data=[];observaciones="";observacionesChange=new D;atender=new D;revisarStock=new D;volver=new D;displayedColumns=["revisar","id_producto","nombre_producto","descripcion_producto","cantidadsolicitada","codigo_digemid","registro_sanitario","id_tipo","id_forma","estado","decision"];onDecisionChange(){}todasDecisionesTomadas(){return this.data.length>0&&this.data.every(t=>!!t.decision)}emitirAtender(){this.todasDecisionesTomadas()&&this.atender.emit({productos:this.data,observaciones:this.observaciones})}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=b({type:e,selectors:[["app-detalle-requerimiento-atender-table"]],inputs:{data:"data",observaciones:"observaciones"},outputs:{observacionesChange:"observacionesChange",atender:"atender",revisarStock:"revisarStock",volver:"volver"},decls:46,vars:5,consts:[[1,"atender-container"],["mat-table","",1,"mat-elevation-z2","atender-table",3,"dataSource"],["matColumnDef","revisar"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id_producto"],["matColumnDef","nombre_producto"],["matColumnDef","descripcion_producto"],["matColumnDef","cantidadsolicitada"],["matColumnDef","codigo_digemid"],["matColumnDef","registro_sanitario"],["matColumnDef","id_tipo"],["matColumnDef","id_forma"],["matColumnDef","estado"],["matColumnDef","decision"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"observaciones"],["matInput","","rows","4","placeholder","Ingrese observaciones",3,"ngModelChange","ngModel"],[1,"acciones"],["mat-stroked-button","","color","primary",3,"click"],["mat-raised-button","","color","primary",3,"click","disabled"],["mat-header-cell",""],["mat-cell",""],["appearance","outline",1,"decision-field"],["placeholder","Seleccione",3,"ngModelChange","selectionChange","ngModel"],["value","COMPRAS"],["value","DISTRIBUCION"],["mat-header-row",""],["mat-row",""]],template:function(i,l){i&1&&(n(0,"div",0)(1,"table",1),c(2,2),m(3,nt,2,0,"th",3)(4,ot,3,0,"td",4),p(),c(5,5),m(6,at,2,0,"th",3)(7,rt,2,1,"td",4),p(),c(8,6),m(9,lt,2,0,"th",3)(10,mt,2,1,"td",4),p(),c(11,7),m(12,dt,2,0,"th",3)(13,ct,2,1,"td",4),p(),c(14,8),m(15,pt,2,0,"th",3)(16,st,2,1,"td",4),p(),c(17,9),m(18,ut,2,0,"th",3)(19,_t,2,1,"td",4),p(),c(20,10),m(21,ft,2,0,"th",3)(22,Ct,2,1,"td",4),p(),c(23,11),m(24,bt,2,0,"th",3)(25,ht,2,1,"td",4),p(),c(26,12),m(27,Dt,2,0,"th",3)(28,gt,2,1,"td",4),p(),c(29,13),m(30,St,2,0,"th",3)(31,xt,2,1,"td",4),p(),c(32,14),m(33,vt,2,0,"th",3)(34,Pt,7,1,"td",4),p(),m(35,Tt,1,0,"tr",15)(36,Mt,1,0,"tr",16),o(),n(37,"div",17)(38,"h3"),a(39,"Observaciones"),o(),n(40,"textarea",18),de("ngModelChange",function(u){return me(l.observaciones,u)||(l.observaciones=u),u}),f("ngModelChange",function(){return l.observacionesChange.emit(l.observaciones)}),o()(),n(41,"div",19)(42,"button",20),f("click",function(){return l.volver.emit()}),a(43,"Volver"),o(),n(44,"button",21),f("click",function(){return l.emitirAtender()}),a(45,"Atender Requerimiento"),o()()()),i&2&&(r(),_("dataSource",l.data),r(34),_("matHeaderRowDef",l.displayedColumns),r(),_("matRowDefColumns",l.displayedColumns),r(4),le("ngModel",l.observaciones),r(4),_("disabled",!l.todasDecisionesTomadas()))},dependencies:[v,J,ze,We,Ge,N,M,R,q,E,w,I,y,O,A,k,T,P,Y,be,ge,De,K,X,he],styles:[".atender-container[_ngcontent-%COMP%]{padding:1rem}.atender-table[_ngcontent-%COMP%]{width:100%;margin-bottom:1.5rem}.decision-field[_ngcontent-%COMP%]{width:160px}.observaciones[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;resize:vertical}.acciones[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:1rem}"]})};function Rt(e,t){e&1&&(n(0,"th",17),a(1," N\xFAmero Lote "),o())}function Et(e,t){if(e&1&&(n(0,"td",18),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.numero_lote," ")}}function yt(e,t){e&1&&(n(0,"th",17),a(1," F. Fabricaci\xF3n "),o())}function Ot(e,t){if(e&1&&(n(0,"td",18),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.fecha_fabricacion," ")}}function qt(e,t){e&1&&(n(0,"th",17),a(1," F. Vencimiento "),o())}function It(e,t){if(e&1&&(n(0,"td",18),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.fecha_vencimiento," ")}}function At(e,t){e&1&&(n(0,"th",17),a(1," Cantidad Actual "),o())}function kt(e,t){if(e&1&&(n(0,"td",18),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.cantidad_actual," ")}}function Nt(e,t){e&1&&(n(0,"th",17),a(1," Ubicaci\xF3n "),o())}function Ft(e,t){if(e&1&&(n(0,"td",18),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.ubicacion_almacen," ")}}function $t(e,t){e&1&&(n(0,"th",17),a(1," Temp. Almac. "),o())}function Bt(e,t){if(e&1&&(n(0,"td",18),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.temperatura_almacenamiento," ")}}function Vt(e,t){e&1&&(n(0,"th",17),a(1," Fecha Registro "),o())}function Ht(e,t){if(e&1&&(n(0,"td",18),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.fecha_creacion," ")}}function Lt(e,t){e&1&&(n(0,"th",17),a(1," Acci\xF3n "),o())}function Ut(e,t){if(e&1){let i=x();n(0,"td",18)(1,"button",19),f("click",function(){let d=g(i).$implicit,u=C();return S(u.seleccionar(d))}),n(2,"mat-icon"),a(3,"check"),o()()()}}function jt(e,t){e&1&&h(0,"tr",20)}function zt(e,t){e&1&&h(0,"tr",21)}var xe=class e{nombreProducto="";lotes=[];close=new D;selectLote=new D;displayedColumns=["numero_lote","fecha_fabricacion","fecha_vencimiento","cantidad_actual","ubicacion_almacen","temperatura_almacenamiento","fecha_creacion","acciones"];seleccionar(t){t.id_lote?(this.selectLote.emit(t.id_lote),this.close.emit()):alert("Error: Este lote no tiene ID v\xE1lido.")}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=b({type:e,selectors:[["app-popup-revisar-stock-producto"]],inputs:{nombreProducto:"nombreProducto",lotes:"lotes"},outputs:{close:"close",selectLote:"selectLote"},decls:34,vars:4,consts:[[1,"popup-overlay"],[1,"popup-container","mat-elevation-z4"],["mat-table","",1,"stock-table",3,"dataSource"],["matColumnDef","numero_lote"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","fecha_fabricacion"],["matColumnDef","fecha_vencimiento"],["matColumnDef","cantidad_actual"],["matColumnDef","ubicacion_almacen"],["matColumnDef","temperatura_almacenamiento"],["matColumnDef","fecha_creacion"],["matColumnDef","acciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"acciones"],["mat-stroked-button","","color","primary",3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-mini-fab","","color","accent",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(i,l){i&1&&(n(0,"div",0)(1,"div",1)(2,"h3"),a(3),o(),n(4,"table",2),c(5,3),m(6,Rt,2,0,"th",4)(7,Et,2,1,"td",5),p(),c(8,6),m(9,yt,2,0,"th",4)(10,Ot,2,1,"td",5),p(),c(11,7),m(12,qt,2,0,"th",4)(13,It,2,1,"td",5),p(),c(14,8),m(15,At,2,0,"th",4)(16,kt,2,1,"td",5),p(),c(17,9),m(18,Nt,2,0,"th",4)(19,Ft,2,1,"td",5),p(),c(20,10),m(21,$t,2,0,"th",4)(22,Bt,2,1,"td",5),p(),c(23,11),m(24,Vt,2,0,"th",4)(25,Ht,2,1,"td",5),p(),c(26,12),m(27,Lt,2,0,"th",4)(28,Ut,4,0,"td",5),p(),m(29,jt,1,0,"tr",13)(30,zt,1,0,"tr",14),o(),n(31,"div",15)(32,"button",16),f("click",function(){return l.close.emit()}),a(33,"Volver"),o()()()()),i&2&&(r(3),s("Stock del producto ",l.nombreProducto," en los almacenes"),r(),_("dataSource",l.lotes),r(25),_("matHeaderRowDef",l.displayedColumns),r(),_("matRowDefColumns",l.displayedColumns))},dependencies:[v,N,M,R,q,E,w,I,y,O,A,k,T,P,Ue,G,Ce],styles:[".popup-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0006;display:flex;justify-content:center;align-items:flex-start;padding-top:3rem;z-index:1000}.popup-container[_ngcontent-%COMP%]{background:#fff;padding:1.25rem 1.5rem;border-radius:8px;width:100%;max-width:900px}h3[_ngcontent-%COMP%]{margin-top:0;margin-bottom:1rem;color:#1e3a8a}.stock-table[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem}th[_ngcontent-%COMP%]{font-weight:600}.acciones[_ngcontent-%COMP%]{text-align:right}"]})};var z=class e{constructor(t,i){this.http=t;this.authService=i}apiUrl=`${Q.apiUrl}/api/programacion`;requerimientosSubject=new Ee([]);requerimientos$=this.requerimientosSubject.asObservable();productosAtenderSubject=new Ee([]);loadProductosParaAtender(t){this.http.get(`${this.apiUrl}/requerimientos/${t}/detalles`).subscribe(i=>{let d=i.data.map(u=>({id_producto:u.idProducto.id,nombre_producto:u.idProducto.nombreProducto,descripcion_producto:u.idProducto.nombreProducto,cantidadsolicitada:u.cantidad,codigo_digemid:u.idProducto.codigoDigemid||"",registro_sanitario:u.idProducto.registroSanitario||"",id_tipo:u.idProducto.idTipoNombreTipo||"",id_forma:u.idProducto.idFormaNombreForma||"",estado:"pendiente",idDetalleRequerimiento:u.id}));this.productosAtenderSubject.next(d)})}getProductosParaAtender(){return this.productosAtenderSubject.asObservable()}getLotesByProducto(t){return this.http.get(`${this.apiUrl}/productos/${t}/stock`).pipe(U(i=>i.data.map(l=>({numero_lote:l.idLote.numeroLote,fecha_fabricacion:"",fecha_vencimiento:l.idLote.fechaVencimiento,cantidad_actual:l.stockActual,ubicacion_almacen:l.idAlmacen.nombreAlmacen,temperatura_almacenamiento:"",fecha_creacion:"",id_lote:l.idLote.id}))))}getRequerimientos(){return this.requerimientosSubject.value}getRequerimientoById(t){return this.getRequerimientos().find(i=>i.id_req===t)}getRequerimientosPendientes(){return this.http.get(`${this.apiUrl}/requerimientos/pendientes`).pipe(U(t=>t.data.map(i=>({id_req:i.id.toString(),id_usr:i.idUsuarioSolicitanteNombreUsuario||"N/A",id_dep:i.idDepartamentoNombreDepartamento,fecha:i.fechaSolicitud,descripcion:i.prioridad,prioridad:i.prioridad,status_req:"pendiente",productos:[]}))),ue(t=>this.requerimientosSubject.next(t)))}getRequerimientosPendientesTabla(){return this.getRequerimientosPendientes().pipe(U(this.mapRequerimientosToRows))}mapRequerimientosToRows(t){return t.map(i=>({id_req:i.id_req,id_usr:i.id_usr,id_dep:i.id_dep,fecha_emision:i.fecha,descripcion:i.descripcion,prioridad:i.prioridad,estado:i.status_req}))}aceptarRequerimiento(t,i){let d=this.authService.getCurrentUser()?.id||1,u=i.filter($=>$.decision==="COMPRAS"),B=i.filter($=>$.decision==="DISTRIBUCION"),pe=[];if(u.length>0){let $={idRequerimiento:Number(t),idUsuarioSolicitante:d,motivo:"Abastecimiento por requerimiento "+t,detalles:u.map(ae=>({idProducto:Number(ae.id_producto),idDetalleRequerimiento:ae.idDetalleRequerimiento,cantidadSolicitada:ae.cantidadsolicitada}))},Re={idRequerimiento:Number(t),tipo:"COMPRA",solicitudCompra:$,detallesDistribucion:null};pe.push(this.http.post(`${this.apiUrl}/ordenes`,Re))}if(B.length>0){let $=B.filter(re=>!!re.loteSeleccionado);if($.length!==B.length){alert("Error: Productos para distribuci\xF3n deben tener un lote seleccionado.");return}let Re=$.map(re=>({idProducto:Number(re.id_producto),idLote:re.loteSeleccionado,cantidad:re.cantidadsolicitada})),ae={idRequerimiento:Number(t),tipo:"DISTRIBUCION",solicitudCompra:null,detallesDistribucion:Re};pe.push(this.http.post(`${this.apiUrl}/ordenes`,ae))}pe.length>0&&se(pe).subscribe({next:$=>{console.log("Ordenes creadas:",$),alert("Requerimiento procesado exitosamente.")},error:$=>{console.error("Error procesando requerimiento:",$),alert("Error al procesar: "+($.error?.message||$.message))}})}ordenesDistribucionCache=[];solicitudesCompraCache=[];getOrdenDistribucion(){return this.http.get(`${Q.apiUrl}/api/distribucion/ordenes?estado=PENDIENTE`).pipe(Oe(t=>{let i=t.data;if(!i||i.length===0)return ye([]);let l=i.map(d=>this.http.get(`${Q.apiUrl}/api/distribucion/ordenes/${d.id}/detalles`).pipe(U(u=>u.data.map(B=>({id_orden_dist:d.id.toString(),id_lote:B.idLote?.id?.toString()||"N/A",id_producto:B.idProducto?.id?.toString()||"N/A",cantidad:B.cantidad,condiciones_transporte:B.estadoEntrega,temperatura_requerida:"",observaciones:"",fecha_creacion:d.fechaDistribucion})))));return se(l).pipe(U(d=>d.flat()))}),ue(t=>this.ordenesDistribucionCache=t))}getSolicitudCompra(){return this.http.get(`${Q.apiUrl}/api/compras/solicitudes?estado=PENDIENTE`).pipe(Oe(t=>{let i=t.data;if(!i||i.length===0)return ye([]);let l=i.map(d=>this.http.get(`${Q.apiUrl}/api/compras/solicitudes/${d.id}/detalles`).pipe(U(u=>u.data.map(B=>({id_solicitud:d.id.toString(),id_producto:B.idProducto?.id?.toString()||"N/A",cantidad:B.cantidadSolicitada,observacion:B.estado,fecha_creacion:d.fechaSolicitud,fecha_actual:d.fechaSolicitud})))));return se(l).pipe(U(d=>d.flat()))}),ue(t=>this.solicitudesCompraCache=t))}getOrdenDistribucionById(t){return this.ordenesDistribucionCache.filter(i=>i.id_orden_dist===t)}getSolicitudCompraById(t){return this.solicitudesCompraCache.filter(i=>i.id_solicitud===t)}static \u0275fac=function(i){return new(i||e)(qe(Be),qe(Qe))};static \u0275prov=$e({token:e,factory:e.\u0275fac,providedIn:"root"})};function Gt(e,t){if(e&1){let i=x();n(0,"app-popup-revisar-stock-producto",3),f("selectLote",function(d){g(i);let u=C();return S(u.onLoteSeleccionado(d))})("close",function(){g(i);let d=C();return S(d.cerrarPopupStock())}),o()}if(e&2){let i=C();_("nombreProducto",i.nombreProductoSeleccionado)("lotes",i.lotesProducto)}}var ve=class e{constructor(t,i){this.programacionService=t;this.route=i}reqIdActual=null;productos=[];observaciones="";mostrarPopupStock=!1;lotesProducto=[];nombreProductoSeleccionado="";productoEnRevision=null;ngOnInit(){let t=this.route.snapshot.paramMap.get("id");t?(this.reqIdActual=t,this.programacionService.loadProductosParaAtender(t)):this.programacionService.getRequerimientosPendientesTabla().subscribe(i=>{i.length&&(this.reqIdActual=i[0].id_req,this.programacionService.loadProductosParaAtender(this.reqIdActual))}),this.programacionService.getProductosParaAtender().subscribe(i=>{this.productos=i.map(l=>{let d=this.productos.find(u=>u.id_producto===l.id_producto);return Fe(Ne({},l),{decision:d?.decision,loteSeleccionado:d?.loteSeleccionado})})})}onAtender(t){this.reqIdActual&&this.programacionService.aceptarRequerimiento(this.reqIdActual,t.productos)}onVolver(){history.back()}onRevisarStock(t){this.productoEnRevision=t,this.nombreProductoSeleccionado=t.nombre_producto,this.programacionService.getLotesByProducto(t.id_producto).subscribe(i=>{this.lotesProducto=i,this.mostrarPopupStock=!0})}onLoteSeleccionado(t){this.productoEnRevision&&(this.productoEnRevision.loteSeleccionado=t,alert(`Lote ${t} seleccionado para ${this.productoEnRevision.nombre_producto}`))}cerrarPopupStock(){this.mostrarPopupStock=!1,this.lotesProducto=[],this.nombreProductoSeleccionado="",this.productoEnRevision=null}static \u0275fac=function(i){return new(i||e)(H(z),H(Ve))};static \u0275cmp=b({type:e,selectors:[["app-disponibilidad-producto"]],decls:5,vars:4,consts:[[1,"page-container"],[3,"observacionesChange","atender","volver","revisarStock","data","observaciones"],[3,"nombreProducto","lotes","selectLote","close",4,"ngIf"],[3,"selectLote","close","nombreProducto","lotes"]],template:function(i,l){i&1&&(n(0,"div",0)(1,"h2"),a(2),o(),n(3,"app-detalle-requerimiento-atender-table",1),de("observacionesChange",function(u){return me(l.observaciones,u)||(l.observaciones=u),u}),f("atender",function(u){return l.onAtender(u)})("volver",function(){return l.onVolver()})("revisarStock",function(u){return l.onRevisarStock(u)}),o(),m(4,Gt,1,2,"app-popup-revisar-stock-producto",2),o()),i&2&&(r(2),s("Atender Requerimiento ",l.reqIdActual),r(),_("data",l.productos),le("observaciones",l.observaciones),r(),_("ngIf",l.mostrarPopupStock))},dependencies:[v,j,Se,xe],styles:[".buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:2rem}.page-container[_ngcontent-%COMP%]{padding:1.5rem;color:#1e3a8a}.card-section[_ngcontent-%COMP%]{margin-bottom:2rem;background-color:#f8f9fc}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{color:#1e3a8a;margin-bottom:1rem}"]})};function Jt(e,t){e&1&&(n(0,"th",13),a(1," ID Req "),o())}function Qt(e,t){if(e&1&&(n(0,"td",14),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.id_req," ")}}function Kt(e,t){e&1&&(n(0,"th",13),a(1," Usuario "),o())}function Xt(e,t){if(e&1&&(n(0,"td",14),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.id_usr," ")}}function Yt(e,t){e&1&&(n(0,"th",13),a(1," Departamento "),o())}function Zt(e,t){if(e&1&&(n(0,"td",14),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.id_dep," ")}}function ei(e,t){e&1&&(n(0,"th",13),a(1," Fecha "),o())}function ti(e,t){if(e&1&&(n(0,"td",14),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.fecha," ")}}function ii(e,t){e&1&&(n(0,"th",13),a(1," Prioridad "),o())}function ni(e,t){if(e&1&&(n(0,"td",14),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.prioridad," ")}}function oi(e,t){e&1&&(n(0,"th",13),a(1," Estado "),o())}function ai(e,t){if(e&1&&(n(0,"td",14),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.status_req," ")}}function ri(e,t){e&1&&(n(0,"th",13),a(1," Acci\xF3n "),o())}function li(e,t){if(e&1){let i=x();n(0,"td",14)(1,"button",15),f("click",function(){let d=g(i).$implicit,u=C();return S(u.atender(d))}),a(2,"Atender"),o()()}}function mi(e,t){e&1&&h(0,"tr",16)}function di(e,t){e&1&&h(0,"tr",17)}var Pe=class e{constructor(t){this.router=t}data=[];displayedColumns=["id_req","id_usr","id_dep","fecha","prioridad","status_req","accion"];atender(t){this.router.navigate(["/GestionProgramacion/disponibilidad-producto/",t.id_req])}static \u0275fac=function(i){return new(i||e)(H(He))};static \u0275cmp=b({type:e,selectors:[["app-requerimientos-pendientes-table"]],inputs:{data:"data"},standalone:!1,decls:25,vars:3,consts:[[1,"table-container"],["mat-table","",1,"mat-elevation-z2",3,"dataSource"],["matColumnDef","id_req"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id_usr"],["matColumnDef","id_dep"],["matColumnDef","fecha"],["matColumnDef","prioridad"],["matColumnDef","status_req"],["matColumnDef","accion"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-button","","color","primary",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(i,l){i&1&&(n(0,"div",0)(1,"table",1),c(2,2),m(3,Jt,2,0,"th",3)(4,Qt,2,1,"td",4),p(),c(5,5),m(6,Kt,2,0,"th",3)(7,Xt,2,1,"td",4),p(),c(8,6),m(9,Yt,2,0,"th",3)(10,Zt,2,1,"td",4),p(),c(11,7),m(12,ei,2,0,"th",3)(13,ti,2,1,"td",4),p(),c(14,8),m(15,ii,2,0,"th",3)(16,ni,2,1,"td",4),p(),c(17,9),m(18,oi,2,0,"th",3)(19,ai,2,1,"td",4),p(),c(20,10),m(21,ri,2,0,"th",3)(22,li,3,0,"td",4),p(),m(23,mi,1,0,"tr",11)(24,di,1,0,"tr",12),o()()),i&2&&(r(),_("dataSource",l.data),r(22),_("matHeaderRowDef",l.displayedColumns),r(),_("matRowDefColumns",l.displayedColumns))},dependencies:[M,R,q,E,w,I,y,O,A,k,P],styles:[".table-container[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto}table[_ngcontent-%COMP%]{width:100%}th[_ngcontent-%COMP%]{background-color:#e0f0ff;color:#1e3a8a;font-weight:700}button[_ngcontent-%COMP%]{color:#1e3a8a;font-weight:500}"]})};function pi(e,t){if(e&1){let i=x();n(0,"button",4),f("click",function(){g(i);let d=C();return S(d.clear())}),a(1,"Limpiar"),o()}}var Te=class e{filterChange=new D;term="";onInput(t){this.term=t,this.filterChange.emit(this.term.trim())}clear(){this.term="",this.filterChange.emit("")}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=b({type:e,selectors:[["app-search-bar-no-atendidos"]],outputs:{filterChange:"filterChange"},standalone:!1,decls:5,vars:2,consts:[[1,"search-wrapper"],["for","filterId",1,"search-label"],["id","filterId","type","text","placeholder","Ej: REQ01",3,"input","value"],["mat-stroked-button","","color","primary",3,"click",4,"ngIf"],["mat-stroked-button","","color","primary",3,"click"]],template:function(i,l){i&1&&(n(0,"div",0)(1,"label",1),a(2,"Filtrar por ID Requerimiento:"),o(),n(3,"input",2),f("input",function(u){return l.onInput(u.target.value)}),o(),m(4,pi,2,0,"button",3),o()),i&2&&(r(3),_("value",l.term),r(),_("ngIf",l.term))},dependencies:[j,P],styles:[".search-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;margin-bottom:1rem}.search-label[_ngcontent-%COMP%]{font-weight:600;color:#1e3a8a}input[type=text][_ngcontent-%COMP%]{padding:6px 10px;border:1px solid #c5d4f1;border-radius:4px;font-size:14px;width:180px}input[type=text][_ngcontent-%COMP%]:focus{outline:none;border-color:#1e3a8a;box-shadow:0 0 0 2px #1e3a8a26}"]})};var ce=class e{constructor(t){this.programacionService=t}dataOriginal=[];data=[];filterTerm="";ngOnInit(){this.programacionService.getRequerimientosPendientes().subscribe(t=>{this.dataOriginal=t,this.applyFilter()})}onFilterChange(t){this.filterTerm=t,this.applyFilter()}applyFilter(){let t=this.filterTerm.toLowerCase();this.data=t?this.dataOriginal.filter(i=>i.id_req.toString().includes(t)):this.dataOriginal}static \u0275fac=function(i){return new(i||e)(H(z))};static \u0275cmp=b({type:e,selectors:[["app-lista-requerimientos-noatendidos"]],standalone:!1,decls:5,vars:1,consts:[[1,"page-container"],[3,"filterChange"],[3,"data"]],template:function(i,l){i&1&&(n(0,"div",0)(1,"h2"),a(2,"Requerimientos Pendientes"),o(),n(3,"app-search-bar-no-atendidos",1),f("filterChange",function(u){return l.onFilterChange(u)}),o(),h(4,"app-requerimientos-pendientes-table",2),o()),i&2&&(r(4),_("data",l.data))},dependencies:[Pe,Te],styles:[".page-container[_ngcontent-%COMP%]{padding:1.5rem;color:#1e3a8a}.card-section[_ngcontent-%COMP%]{margin-bottom:2rem;background-color:#f8f9fc}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{color:#1e3a8a;margin-bottom:1rem}"]})};function ui(e,t){if(e&1){let i=x();n(0,"button",8),f("click",function(){g(i);let d=C();return S(d.clear())}),n(1,"mat-icon"),a(2,"close"),o()()}}var Z=class e{filterChange=new D;term="";modo="DISTRIBUCION";onTerm(t){this.term=t,this.emit()}onModo(t){this.modo=t,this.emit()}clear(){this.term="",this.emit()}emit(){this.filterChange.emit({term:this.term.trim(),modo:this.modo})}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=b({type:e,selectors:[["app-search-bar-atendidos"]],outputs:{filterChange:"filterChange"},decls:14,vars:3,consts:[[1,"search-bar"],["appearance","outline",1,"term-field"],["matInput","","placeholder","OD001 / SC001",3,"input","value"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["appearance","outline",1,"mode-field"],[3,"selectionChange","value"],["value","DISTRIBUCION"],["value","COMPRAS"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(i,l){i&1&&(n(0,"div",0)(1,"mat-form-field",1)(2,"mat-label"),a(3,"Buscar ID"),o(),n(4,"input",2),f("input",function(u){return l.onTerm(u.target.value)}),o(),m(5,ui,3,0,"button",3),o(),n(6,"mat-form-field",4)(7,"mat-label"),a(8,"Tipo"),o(),n(9,"mat-select",5),f("selectionChange",function(u){return l.onModo(u.value)}),n(10,"mat-option",6),a(11,"DISTRIBUCION"),o(),n(12,"mat-option",7),a(13,"COMPRAS"),o()()()()),i&2&&(r(4),_("value",l.term),r(),_("ngIf",l.term),r(4),_("value",l.modo))},dependencies:[v,j,J,K,be,Ke,Xe,X,he,Y,ge,De,G,Ce,T,Le],styles:[".search-bar[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-wrap:wrap;align-items:center;margin-bottom:1rem}.term-field[_ngcontent-%COMP%], .mode-field[_ngcontent-%COMP%]{width:220px}"]})};function _i(e,t){e&1&&(n(0,"th",15),a(1," ID Orden "),o())}function fi(e,t){if(e&1&&(n(0,"td",16),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.id_orden_dist," ")}}function Ci(e,t){e&1&&(n(0,"th",15),a(1," ID Lote "),o())}function bi(e,t){if(e&1&&(n(0,"td",16),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.id_lote," ")}}function hi(e,t){e&1&&(n(0,"th",15),a(1," ID Producto "),o())}function Di(e,t){if(e&1&&(n(0,"td",16),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.id_producto," ")}}function gi(e,t){e&1&&(n(0,"th",15),a(1," Cantidad "),o())}function Si(e,t){if(e&1&&(n(0,"td",16),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.cantidad," ")}}function xi(e,t){e&1&&(n(0,"th",15),a(1," Condiciones Transporte "),o())}function vi(e,t){if(e&1&&(n(0,"td",16),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.condiciones_transporte||"-"," ")}}function Pi(e,t){e&1&&(n(0,"th",15),a(1," Temp. Req. "),o())}function Ti(e,t){if(e&1&&(n(0,"td",16),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.temperatura_requerida||"-"," ")}}function Mi(e,t){e&1&&(n(0,"th",15),a(1," Observaciones "),o())}function wi(e,t){if(e&1&&(n(0,"td",16),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.observaciones||"-"," ")}}function Ri(e,t){e&1&&(n(0,"th",15),a(1," Fecha Creaci\xF3n "),o())}function Ei(e,t){if(e&1&&(n(0,"td",16),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.fecha_creacion||"-"," ")}}function yi(e,t){e&1&&(n(0,"th",15),a(1," Acciones "),o())}function Oi(e,t){if(e&1){let i=x();n(0,"td",16)(1,"button",17),f("click",function(){let d=g(i).$implicit,u=C();return S(u.onVerDetalle(d))}),a(2,"Ver detalle"),o()()}}function qi(e,t){e&1&&h(0,"tr",18)}function Ii(e,t){e&1&&h(0,"tr",19)}var ee=class e{data=[];verDetalle=new D;displayedColumns=["id_orden_dist","id_lote","id_producto","cantidad","condiciones_transporte","temperatura_requerida","observaciones","fecha_creacion","acciones"];onVerDetalle(t){this.verDetalle.emit(t.id_orden_dist)}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=b({type:e,selectors:[["app-orden-distribucion-table"]],inputs:{data:"data"},outputs:{verDetalle:"verDetalle"},decls:31,vars:3,consts:[[1,"table-container"],["mat-table","",1,"mat-elevation-z2",3,"dataSource"],["matColumnDef","id_orden_dist"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id_lote"],["matColumnDef","id_producto"],["matColumnDef","cantidad"],["matColumnDef","condiciones_transporte"],["matColumnDef","temperatura_requerida"],["matColumnDef","observaciones"],["matColumnDef","fecha_creacion"],["matColumnDef","acciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-button","","color","primary",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(i,l){i&1&&(n(0,"div",0)(1,"table",1),c(2,2),m(3,_i,2,0,"th",3)(4,fi,2,1,"td",4),p(),c(5,5),m(6,Ci,2,0,"th",3)(7,bi,2,1,"td",4),p(),c(8,6),m(9,hi,2,0,"th",3)(10,Di,2,1,"td",4),p(),c(11,7),m(12,gi,2,0,"th",3)(13,Si,2,1,"td",4),p(),c(14,8),m(15,xi,2,0,"th",3)(16,vi,2,1,"td",4),p(),c(17,9),m(18,Pi,2,0,"th",3)(19,Ti,2,1,"td",4),p(),c(20,10),m(21,Mi,2,0,"th",3)(22,wi,2,1,"td",4),p(),c(23,11),m(24,Ri,2,0,"th",3)(25,Ei,2,1,"td",4),p(),c(26,12),m(27,yi,2,0,"th",3)(28,Oi,3,0,"td",4),p(),m(29,qi,1,0,"tr",13)(30,Ii,1,0,"tr",14),o()()),i&2&&(r(),_("dataSource",l.data),r(28),_("matHeaderRowDef",l.displayedColumns),r(),_("matRowDefColumns",l.displayedColumns))},dependencies:[v,N,M,R,q,E,w,I,y,O,A,k,T,P],styles:[".table-container[_ngcontent-%COMP%]{max-height:320px;overflow-y:auto;margin-bottom:1rem}table[_ngcontent-%COMP%]{width:100%}th[_ngcontent-%COMP%]{background:#e5edff;color:#1b3e83;font-weight:600}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{font-size:13px}button[_ngcontent-%COMP%]{font-size:12px}"]})};function Ai(e,t){e&1&&(n(0,"th",13),a(1," ID Solicitud "),o())}function ki(e,t){if(e&1&&(n(0,"td",14),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.id_solicitud," ")}}function Ni(e,t){e&1&&(n(0,"th",13),a(1," ID Producto "),o())}function Fi(e,t){if(e&1&&(n(0,"td",14),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.id_producto," ")}}function $i(e,t){e&1&&(n(0,"th",13),a(1," Cantidad "),o())}function Bi(e,t){if(e&1&&(n(0,"td",14),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.cantidad," ")}}function Vi(e,t){e&1&&(n(0,"th",13),a(1," Observaci\xF3n "),o())}function Hi(e,t){if(e&1&&(n(0,"td",14),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.observacion||"-"," ")}}function Li(e,t){e&1&&(n(0,"th",13),a(1," Fecha Creaci\xF3n "),o())}function Ui(e,t){if(e&1&&(n(0,"td",14),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.fecha_creacion||"-"," ")}}function ji(e,t){e&1&&(n(0,"th",13),a(1," Fecha Actualizaci\xF3n "),o())}function zi(e,t){if(e&1&&(n(0,"td",14),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.fecha_actual||"-"," ")}}function Wi(e,t){e&1&&(n(0,"th",13),a(1," Acciones "),o())}function Gi(e,t){if(e&1){let i=x();n(0,"td",14)(1,"button",15),f("click",function(){let d=g(i).$implicit,u=C();return S(u.onVerDetalle(d))}),a(2,"Ver detalle"),o()()}}function Ji(e,t){e&1&&h(0,"tr",16)}function Qi(e,t){e&1&&h(0,"tr",17)}var te=class e{data=[];verDetalle=new D;displayedColumns=["id_solicitud","id_producto","cantidad","observacion","fecha_creacion","fecha_actual","acciones"];onVerDetalle(t){this.verDetalle.emit(t.id_solicitud)}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=b({type:e,selectors:[["app-solicitud-compras-table"]],inputs:{data:"data"},outputs:{verDetalle:"verDetalle"},decls:25,vars:3,consts:[[1,"table-container"],["mat-table","",1,"mat-elevation-z2",3,"dataSource"],["matColumnDef","id_solicitud"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id_producto"],["matColumnDef","cantidad"],["matColumnDef","observacion"],["matColumnDef","fecha_creacion"],["matColumnDef","fecha_actual"],["matColumnDef","acciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-button","","color","primary",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(i,l){i&1&&(n(0,"div",0)(1,"table",1),c(2,2),m(3,Ai,2,0,"th",3)(4,ki,2,1,"td",4),p(),c(5,5),m(6,Ni,2,0,"th",3)(7,Fi,2,1,"td",4),p(),c(8,6),m(9,$i,2,0,"th",3)(10,Bi,2,1,"td",4),p(),c(11,7),m(12,Vi,2,0,"th",3)(13,Hi,2,1,"td",4),p(),c(14,8),m(15,Li,2,0,"th",3)(16,Ui,2,1,"td",4),p(),c(17,9),m(18,ji,2,0,"th",3)(19,zi,2,1,"td",4),p(),c(20,10),m(21,Wi,2,0,"th",3)(22,Gi,3,0,"td",4),p(),m(23,Ji,1,0,"tr",11)(24,Qi,1,0,"tr",12),o()()),i&2&&(r(),_("dataSource",l.data),r(22),_("matHeaderRowDef",l.displayedColumns),r(),_("matRowDefColumns",l.displayedColumns))},dependencies:[v,N,M,R,q,E,w,I,y,O,A,k,T,P],styles:[".table-container[_ngcontent-%COMP%]{max-height:320px;overflow-y:auto;margin-bottom:1rem}table[_ngcontent-%COMP%]{width:100%}th[_ngcontent-%COMP%]{background:#e5edff;color:#1b3e83;font-weight:600}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{font-size:13px}button[_ngcontent-%COMP%]{font-size:12px}"]})};function Ki(e,t){e&1&&(n(0,"th",18),a(1," ID Orden "),o())}function Xi(e,t){if(e&1&&(n(0,"td",19),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.id_orden_dist," ")}}function Yi(e,t){e&1&&(n(0,"th",18),a(1," ID Lote "),o())}function Zi(e,t){if(e&1&&(n(0,"td",19),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.id_lote," ")}}function en(e,t){e&1&&(n(0,"th",18),a(1," ID Producto "),o())}function tn(e,t){if(e&1&&(n(0,"td",19),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.id_producto," ")}}function nn(e,t){e&1&&(n(0,"th",18),a(1," Cantidad "),o())}function on(e,t){if(e&1&&(n(0,"td",19),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.cantidad," ")}}function an(e,t){e&1&&(n(0,"th",18),a(1," Condiciones Transporte "),o())}function rn(e,t){if(e&1&&(n(0,"td",19),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.condiciones_transporte||"-"," ")}}function ln(e,t){e&1&&(n(0,"th",18),a(1," Temp. Requerida "),o())}function mn(e,t){if(e&1&&(n(0,"td",19),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.temperatura_requerida||"-"," ")}}function dn(e,t){e&1&&(n(0,"th",18),a(1," Observaciones "),o())}function cn(e,t){if(e&1&&(n(0,"td",19),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.observaciones||"-"," ")}}function pn(e,t){e&1&&(n(0,"th",18),a(1," Fecha Creaci\xF3n "),o())}function sn(e,t){if(e&1&&(n(0,"td",19),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.fecha_creacion||"-"," ")}}function un(e,t){e&1&&h(0,"tr",20)}function _n(e,t){e&1&&h(0,"tr",21)}var ie=class e{data=[];close=new D;atender=new D;displayedColumns=["id_orden_dist","id_lote","id_producto","cantidad","condiciones_transporte","temperatura_requerida","observaciones","fecha_creacion"];static \u0275fac=function(i){return new(i||e)};static \u0275cmp=b({type:e,selectors:[["app-popup-detalle-orden-distribucion"]],inputs:{data:"data"},outputs:{close:"close",atender:"atender"},decls:35,vars:3,consts:[[1,"popup-overlay"],[1,"popup-container"],[1,"popup-header"],[1,"table-container"],["mat-table","",1,"mat-elevation-z2",3,"dataSource"],["matColumnDef","id_orden_dist"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id_lote"],["matColumnDef","id_producto"],["matColumnDef","cantidad"],["matColumnDef","condiciones_transporte"],["matColumnDef","temperatura_requerida"],["matColumnDef","observaciones"],["matColumnDef","fecha_creacion"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-stroked-button","","color","primary",3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(i,l){i&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),a(4,"Detalle de orden de distribuci\xF3n"),o()(),n(5,"div",3)(6,"table",4),c(7,5),m(8,Ki,2,0,"th",6)(9,Xi,2,1,"td",7),p(),c(10,8),m(11,Yi,2,0,"th",6)(12,Zi,2,1,"td",7),p(),c(13,9),m(14,en,2,0,"th",6)(15,tn,2,1,"td",7),p(),c(16,10),m(17,nn,2,0,"th",6)(18,on,2,1,"td",7),p(),c(19,11),m(20,an,2,0,"th",6)(21,rn,2,1,"td",7),p(),c(22,12),m(23,ln,2,0,"th",6)(24,mn,2,1,"td",7),p(),c(25,13),m(26,dn,2,0,"th",6)(27,cn,2,1,"td",7),p(),c(28,14),m(29,pn,2,0,"th",6)(30,sn,2,1,"td",7),p(),m(31,un,1,0,"tr",15)(32,_n,1,0,"tr",16),o()(),n(33,"button",17),f("click",function(){return l.close.emit()}),a(34,"Cerrar"),o()()()),i&2&&(r(6),_("dataSource",l.data),r(25),_("matHeaderRowDef",l.displayedColumns),r(),_("matRowDefColumns",l.displayedColumns))},dependencies:[v,N,M,R,q,E,w,I,y,O,A,k,T,P],styles:[".popup-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000073;display:flex;align-items:center;justify-content:center;z-index:1200}.popup-container[_ngcontent-%COMP%]{background:#fff;padding:25px 35px;border-radius:10px;width:720px;color:#1f3b73;box-shadow:0 4px 12px #00000040}.table-container[_ngcontent-%COMP%]{max-height:260px;overflow-y:auto;margin-bottom:15px;border:1px solid #c5d4f1;border-radius:6px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background-color:#f9fbff}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:8px 10px;border-bottom:1px solid #d8e2f4;text-align:left;font-size:14px}th[_ngcontent-%COMP%]{background-color:#e5edff;color:#1b3e83}button[_ngcontent-%COMP%]{margin-top:8px}"]})};function fn(e,t){e&1&&(n(0,"th",16),a(1," ID Solicitud "),o())}function Cn(e,t){if(e&1&&(n(0,"td",17),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.id_solicitud," ")}}function bn(e,t){e&1&&(n(0,"th",16),a(1," ID Producto "),o())}function hn(e,t){if(e&1&&(n(0,"td",17),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.id_producto," ")}}function Dn(e,t){e&1&&(n(0,"th",16),a(1," Cantidad "),o())}function gn(e,t){if(e&1&&(n(0,"td",17),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.cantidad," ")}}function Sn(e,t){e&1&&(n(0,"th",16),a(1," Observaci\xF3n "),o())}function xn(e,t){if(e&1&&(n(0,"td",17),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.observacion||"-"," ")}}function vn(e,t){e&1&&(n(0,"th",16),a(1," Fecha Creaci\xF3n "),o())}function Pn(e,t){if(e&1&&(n(0,"td",17),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.fecha_creacion||"-"," ")}}function Tn(e,t){e&1&&(n(0,"th",16),a(1," Fecha Actualizaci\xF3n "),o())}function Mn(e,t){if(e&1&&(n(0,"td",17),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.fecha_actual||"-"," ")}}function wn(e,t){e&1&&h(0,"tr",18)}function Rn(e,t){e&1&&h(0,"tr",19)}var ne=class e{data=[];close=new D;atender=new D;displayedColumns=["id_solicitud","id_producto","cantidad","observacion","fecha_creacion","fecha_actual"];static \u0275fac=function(i){return new(i||e)};static \u0275cmp=b({type:e,selectors:[["app-popup-detalle-solicitud-de-compra"]],inputs:{data:"data"},outputs:{close:"close",atender:"atender"},decls:29,vars:3,consts:[[1,"popup-overlay"],[1,"popup-container"],[1,"popup-header"],[1,"table-container"],["mat-table","",1,"mat-elevation-z2",3,"dataSource"],["matColumnDef","id_solicitud"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id_producto"],["matColumnDef","cantidad"],["matColumnDef","observacion"],["matColumnDef","fecha_creacion"],["matColumnDef","fecha_actual"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-stroked-button","","color","primary",3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(i,l){i&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),a(4,"Detalle de solicitud de compra"),o()(),n(5,"div",3)(6,"table",4),c(7,5),m(8,fn,2,0,"th",6)(9,Cn,2,1,"td",7),p(),c(10,8),m(11,bn,2,0,"th",6)(12,hn,2,1,"td",7),p(),c(13,9),m(14,Dn,2,0,"th",6)(15,gn,2,1,"td",7),p(),c(16,10),m(17,Sn,2,0,"th",6)(18,xn,2,1,"td",7),p(),c(19,11),m(20,vn,2,0,"th",6)(21,Pn,2,1,"td",7),p(),c(22,12),m(23,Tn,2,0,"th",6)(24,Mn,2,1,"td",7),p(),m(25,wn,1,0,"tr",13)(26,Rn,1,0,"tr",14),o()(),n(27,"button",15),f("click",function(){return l.close.emit()}),a(28,"Cerrar"),o()()()),i&2&&(r(6),_("dataSource",l.data),r(19),_("matHeaderRowDef",l.displayedColumns),r(),_("matRowDefColumns",l.displayedColumns))},dependencies:[v,N,M,R,q,E,w,I,y,O,A,k,T,P],styles:[".popup-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000073;display:flex;align-items:center;justify-content:center;z-index:1200}.popup-container[_ngcontent-%COMP%]{background:#fff;padding:25px 35px;border-radius:10px;width:600px;color:#1f3b73;box-shadow:0 4px 12px #00000040}.table-container[_ngcontent-%COMP%]{max-height:220px;overflow-y:auto;margin-bottom:15px;border:1px solid #c5d4f1;border-radius:6px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background-color:#f9fbff}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:8px 10px;border-bottom:1px solid #d8e2f4;text-align:left;font-size:14px}th[_ngcontent-%COMP%]{background-color:#e5edff;color:#1b3e83}button[_ngcontent-%COMP%]{margin-top:8px}"]})};function En(e,t){if(e&1){let i=x();n(0,"section")(1,"app-orden-distribucion-table",3),f("verDetalle",function(d){g(i);let u=C();return S(u.openDistribucion(d))}),o()()}if(e&2){let i=C();r(),_("data",i.filteredOrdenData)}}function yn(e,t){if(e&1){let i=x();n(0,"section")(1,"app-solicitud-compras-table",3),f("verDetalle",function(d){g(i);let u=C();return S(u.openSolicitud(d))}),o()()}if(e&2){let i=C();r(),_("data",i.filteredSolicitudData)}}function On(e,t){if(e&1){let i=x();n(0,"app-popup-detalle-orden-distribucion",4),f("close",function(){g(i);let d=C();return S(d.showPopupDistribucion=!1)}),o()}if(e&2){let i=C();_("data",i.distribucionDetalle)}}function qn(e,t){if(e&1){let i=x();n(0,"app-popup-detalle-solicitud-de-compra",4),f("close",function(){g(i);let d=C();return S(d.showPopupSolicitud=!1)}),o()}if(e&2){let i=C();_("data",i.solicitudDetalle)}}var oe=class e{constructor(t){this.programacionService=t}currentMode="DISTRIBUCION";ordenDataOriginal=[];solicitudDataOriginal=[];filteredOrdenData=[];filteredSolicitudData=[];showPopupDistribucion=!1;distribucionDetalle=[];showPopupSolicitud=!1;solicitudDetalle=[];ngOnInit(){this.programacionService.getOrdenDistribucion().subscribe(t=>{this.ordenDataOriginal=t,this.currentMode==="DISTRIBUCION"&&this.applyFilter("",this.currentMode)}),this.programacionService.getSolicitudCompra().subscribe(t=>{this.solicitudDataOriginal=t,this.currentMode==="COMPRAS"&&this.applyFilter("",this.currentMode)})}onFilter(t){this.currentMode=t.modo,this.applyFilter(t.term,t.modo)}applyFilter(t,i){let l=t.trim().toLowerCase();i==="DISTRIBUCION"?this.filteredOrdenData=this.ordenDataOriginal.filter(d=>!l||d.id_orden_dist.toLowerCase().includes(l)):this.filteredSolicitudData=this.solicitudDataOriginal.filter(d=>!l||d.id_solicitud.toLowerCase().includes(l))}openDistribucion(t){this.distribucionDetalle=this.programacionService.getOrdenDistribucionById(t),this.showPopupDistribucion=!0}openSolicitud(t){this.solicitudDetalle=this.programacionService.getSolicitudCompraById(t),this.showPopupSolicitud=!0}static \u0275fac=function(i){return new(i||e)(H(z))};static \u0275cmp=b({type:e,selectors:[["app-lista-requerimientos-atendidos"]],decls:5,vars:4,consts:[[3,"filterChange"],[4,"ngIf"],[3,"data","close",4,"ngIf"],[3,"verDetalle","data"],[3,"close","data"]],template:function(i,l){i&1&&(n(0,"app-search-bar-atendidos",0),f("filterChange",function(u){return l.onFilter(u)}),o(),m(1,En,2,1,"section",1)(2,yn,2,1,"section",1)(3,On,1,1,"app-popup-detalle-orden-distribucion",2)(4,qn,1,1,"app-popup-detalle-solicitud-de-compra",2)),i&2&&(r(),_("ngIf",l.currentMode==="DISTRIBUCION"),r(),_("ngIf",l.currentMode==="COMPRAS"),r(),_("ngIf",l.showPopupDistribucion),r(),_("ngIf",l.showPopupSolicitud))},dependencies:[v,j,Z,ee,te,ie,ne],encapsulation:2})};var In=[{path:"",component:ce},{path:"lista-requerimiento",component:ce},{path:"lista-requerimientos-atendidos",component:oe},{path:"disponibilidad-producto/:id",component:ve}],Me=class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=fe({type:e});static \u0275inj=_e({imports:[Ie.forChild(In),Ie]})};function An(e,t){e&1&&(n(0,"th",16),a(1," ID Requerimiento "),o())}function kn(e,t){if(e&1&&(n(0,"td",17),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.id_requerimiento," ")}}function Nn(e,t){e&1&&(n(0,"th",16),a(1," ID Producto "),o())}function Fn(e,t){if(e&1&&(n(0,"td",17),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.id_producto," ")}}function $n(e,t){e&1&&(n(0,"th",16),a(1," Cantidad "),o())}function Bn(e,t){if(e&1&&(n(0,"td",17),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.cantidad," ")}}function Vn(e,t){e&1&&(n(0,"th",16),a(1," Observaci\xF3n "),o())}function Hn(e,t){if(e&1&&(n(0,"td",17),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.observacion||"-"," ")}}function Ln(e,t){e&1&&(n(0,"th",16),a(1," Fecha Creaci\xF3n "),o())}function Un(e,t){if(e&1&&(n(0,"td",17),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.fecha_creacion||"-"," ")}}function jn(e,t){e&1&&(n(0,"th",16),a(1," Fecha Actualizaci\xF3n "),o())}function zn(e,t){if(e&1&&(n(0,"td",17),a(1),o()),e&2){let i=t.$implicit;r(),s(" ",i.fecha_actual||"-"," ")}}function Wn(e,t){e&1&&h(0,"tr",18)}function Gn(e,t){e&1&&h(0,"tr",19)}var we=class e{data=[];close=new D;atender=new D;displayedColumns=["id_requerimiento","id_producto","cantidad","observacion","fecha_creacion","fecha_actual"];static \u0275fac=function(i){return new(i||e)};static \u0275cmp=b({type:e,selectors:[["app-popup-detalle-de-requerimiento"]],inputs:{data:"data"},outputs:{close:"close",atender:"atender"},decls:29,vars:3,consts:[[1,"popup-overlay"],[1,"popup-container"],[1,"popup-header"],[1,"table-container"],["mat-table","",1,"mat-elevation-z2",3,"dataSource"],["matColumnDef","id_requerimiento"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id_producto"],["matColumnDef","cantidad"],["matColumnDef","observacion"],["matColumnDef","fecha_creacion"],["matColumnDef","fecha_actual"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-stroked-button","","color","primary",3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(i,l){i&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),a(4,"Detalle del requerimiento"),o()(),n(5,"div",3)(6,"table",4),c(7,5),m(8,An,2,0,"th",6)(9,kn,2,1,"td",7),p(),c(10,8),m(11,Nn,2,0,"th",6)(12,Fn,2,1,"td",7),p(),c(13,9),m(14,$n,2,0,"th",6)(15,Bn,2,1,"td",7),p(),c(16,10),m(17,Vn,2,0,"th",6)(18,Hn,2,1,"td",7),p(),c(19,11),m(20,Ln,2,0,"th",6)(21,Un,2,1,"td",7),p(),c(22,12),m(23,jn,2,0,"th",6)(24,zn,2,1,"td",7),p(),m(25,Wn,1,0,"tr",13)(26,Gn,1,0,"tr",14),o()(),n(27,"button",15),f("click",function(){return l.close.emit()}),a(28,"Cerrar"),o()()()),i&2&&(r(6),_("dataSource",l.data),r(19),_("matHeaderRowDef",l.displayedColumns),r(),_("matRowDefColumns",l.displayedColumns))},dependencies:[v,N,M,R,q,E,w,I,y,O,A,k,T,P],styles:[".popup-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000073;display:flex;align-items:center;justify-content:center;z-index:1200}.popup-container[_ngcontent-%COMP%]{background:#fff;padding:25px 35px;border-radius:10px;width:600px;color:#1f3b73;box-shadow:0 4px 12px #00000040}.info-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0}.table-container[_ngcontent-%COMP%]{max-height:220px;overflow-y:auto;margin-bottom:15px;border:1px solid #c5d4f1;border-radius:6px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background-color:#f9fbff}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:8px 10px;border-bottom:1px solid #d8e2f4;text-align:left;font-size:14px}th[_ngcontent-%COMP%]{background-color:#e5edff;color:#1b3e83}.incidencia-section[_ngcontent-%COMP%]{background-color:#f5f8ff;padding:10px 12px;border-radius:8px;border-left:4px solid #1f64ff;margin-top:15px}.button-group[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:20px;gap:10px}.button[_ngcontent-%COMP%]{border:round;padding:8px 14px;border-radius:6px;cursor:pointer;font-weight:500}.resolve-btn[_ngcontent-%COMP%]{background-color:#1f64ff;color:#fff}.back-btn[_ngcontent-%COMP%]{background-color:#ccc;color:#333}.resuelta[_ngcontent-%COMP%]{color:#1ba14e;font-weight:600}"]})};var et=class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=fe({type:e});static \u0275inj=_e({imports:[Me,v,N,T,Ye,G,je,Ze,K,X,Y,J,Je,Z,ee,te,oe,we,ne,ie]})};export{et as ProgramacionModule};
